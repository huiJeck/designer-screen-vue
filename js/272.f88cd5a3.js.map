{"version":3,"file":"js/272.f88cd5a3.js","mappings":"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","sources":["webpack://vue2-composition-api/./src/views/preview.vue?e890","webpack://vue2-composition-api/./src/designer/renderer/preview.vue?8372","webpack://vue2-composition-api/src/designer/renderer/preview.vue","webpack://vue2-composition-api/./src/designer/renderer/preview.vue?728e","webpack://vue2-composition-api/./src/designer/renderer/preview.vue","webpack://vue2-composition-api/src/views/preview.vue","webpack://vue2-composition-api/./src/views/preview.vue?30af","webpack://vue2-composition-api/./src/views/preview.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"editor-frame--viewport\"},[_c('PreviewRender',{attrs:{\"screen\":_vm.schemaObject.screen,\"map\":_vm.schemaObject.map,\"nodes\":_vm.schemaObject.nodes}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"preview-view\"},[_c('div',{staticClass:\"screen-content\",style:((\"width:\" + _vm.screenWidth + \"px;height:\" + _vm.screenHeight + \"px;\\n      transform:translate(\" + (_vm.getMinValue(_vm.defaultLeft)) + \"px, \" + (_vm.getMinValue(\n      _vm.defaultTop\n    )) + \"px) scale(\" + (_vm.scaleSize / 100) + \");transform-origin:0 0;\"))},[_c('img',{attrs:{\"src\":require((\"@/assets/map\" + _vm.curMapId + \".png\")),\"alt\":\"\"}}),_c('div',{staticClass:\"screen-decoration\"},[_vm._l((_vm.decorationImgList),function(imgItem,index){return _c('img',{key:index,staticClass:\"position-img\",class:imgItem.position,attrs:{\"src\":require((\"@/designer/assets/images/\" + _vm.column + \"/\" + (imgItem.bg) + \".png\"))}})}),_c('div',{staticClass:\"position-title\"},[_vm._v(_vm._s(_vm.screenTitle))]),_c('div',{staticClass:\"grid-stack\",class:(\"grid-stack-style\" + _vm.column)},_vm._l((_vm.nodesArr),function(item){return _c('div',{key:item.id,staticClass:\"grid-stack-item\",attrs:{\"gs-id\":item.id,\"id\":item.id,\"gs-w\":item.w,\"gs-h\":item.h,\"gs-x\":item.x,\"gs-y\":item.y}},[_c('div',{staticClass:\"grid-stack-item-content\"},[_c(item.componentName,_vm._b({tag:\"component\",attrs:{\"node\":item}},'component',item.props,false))],1)])}),0)],2)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"preview-view\">\n    <div\n      class=\"screen-content\"\n      :style=\"`width:${screenWidth}px;height:${screenHeight}px;\n        transform:translate(${getMinValue(defaultLeft)}px, ${getMinValue(\n        defaultTop\n      )}px) scale(${scaleSize / 100});transform-origin:0 0;`\"\n    >\n      <img :src=\"require(`@/assets/map${curMapId}.png`)\" alt=\"\" />\n      <div class=\"screen-decoration\">\n        <!-- 装饰图层 -->\n        <!-- <img src=\"@/assets/map2.png\" alt=\"\" /> -->\n        <img\n          v-for=\"(imgItem, index) in decorationImgList\"\n          :key=\"index\"\n          class=\"position-img\"\n          :class=\"imgItem.position\"\n          :src=\"require(`@/designer/assets/images/${column}/${imgItem.bg}.png`)\"\n        />\n        <div class=\"position-title\">{{ screenTitle }}</div>\n        <div class=\"grid-stack\" :class=\"`grid-stack-style${column}`\">\n          <div\n            class=\"grid-stack-item\"\n            v-for=\"item in nodesArr\"\n            :gs-id=\"item.id\"\n            :id=\"item.id\"\n            :key=\"item.id\"\n            :gs-w=\"item.w\"\n            :gs-h=\"item.h\"\n            :gs-x=\"item.x\"\n            :gs-y=\"item.y\"\n          >\n            <div class=\"grid-stack-item-content\">\n              <component\n                :is=\"item.componentName\"\n                v-bind=\"item.props\"\n                :node=\"item\"\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n\n\n<script >\nimport 'gridstack/dist/gridstack.min.css';\nimport '@/styles/gridstack-column.scss';\nimport { GridStack } from 'gridstack';\nimport { SCREEN_SIZE } from '@/designer/constants/index';\nimport View1 from '@/designer/assets/components/view1/index.vue';\nimport View2 from '@/designer/assets/components/view2/index.vue';\nimport Condition from '@/designer/assets/components/condition/index.vue';\nimport MapDocument from '@/designer/assets/components/map-document/index.vue';\nconst __sfc_main = {\n  name: 'PreviewRender',\n  components: {\n    View1,\n    View2,\n    Condition,\n    MapDocument\n  }\n};\n__sfc_main.props = {\n  nodes: {\n    type: Array,\n    default: () => []\n  },\n  map: {\n    type: Object,\n    default: () => ({})\n  },\n  screen: {\n    type: Object,\n    default: () => ({})\n  }\n};\n__sfc_main.setup = (__props, __ctx) => {\n  const props = __props;\n  const curMapId = computed(() => {\n    return props.map.props.mapId;\n  });\n  const column = computed(() => {\n    return props.map.props.column;\n  });\n  const screenTitle = computed(() => {\n    return props.screen.props.title;\n  });\n  const decorationImgList = [{\n    bg: 'top-bg',\n    position: 'position-top'\n  }, {\n    bg: 'right-bg',\n    position: 'position-left'\n  }, {\n    bg: 'right-bg',\n    position: 'position-right'\n  }, {\n    bg: 'bottom-bg',\n    position: 'position-bottom'\n  }];\n  const screenWidth = ref(SCREEN_SIZE[column.value].width);\n  const screenHeight = ref(SCREEN_SIZE[column.value].height);\n  const scaleWidth = ref(window.innerWidth / screenWidth.value * 100); // 默认缩小\n  const scaleHeight = ref(window.innerHeight / screenHeight.value * 100); // 默认缩小\n\n  const scaleSize = computed(() => {\n    return scaleWidth.value < scaleHeight.value ? scaleWidth.value : scaleHeight.value;\n  });\n  const defaultTop = ref((window.innerHeight - window.innerWidth / screenWidth.value * screenHeight.value) / 2); // 垂直居中\n\n  const defaultLeft = ref((window.innerWidth - window.innerHeight / screenHeight.value * screenWidth.value) / 2); // 水平居中\n\n  const getMinValue = value => {\n    return value < 0 ? 0 : value;\n  };\n  const grid = ref(null);\n  const nodesArr = ref([]);\n  onMounted(async () => {\n    grid.value = GridStack.init({\n      acceptWidgets: true,\n      marginTop: 0,\n      marginBottom: 16,\n      marginLeft: 16,\n      marginRight: 0,\n      disableResize: true,\n      float: true,\n      row: 10,\n      cellHeight: '108px'\n    });\n    nodesArr.value = props.nodes;\n    await nextTick();\n    grid.value.column(column.value);\n    grid.value.disable(false); // 禁止拖动\n    nodesArr.value.forEach(item => {\n      grid.value.makeWidget(`#${item.id}`);\n    });\n    GridStack.setupDragIn('.sidebar .grid-stack-item', {\n      appendTo: 'body',\n      helper: 'clone'\n    });\n  });\n  return {\n    curMapId,\n    column,\n    screenTitle,\n    decorationImgList,\n    screenWidth,\n    screenHeight,\n    scaleSize,\n    defaultTop,\n    defaultLeft,\n    getMinValue,\n    nodesArr\n  };\n};\nexport default __sfc_main;\n</script>\n\n<style lang=\"scss\" scoped>\n// 画布\n.preview-view {\n  height: 100%;\n  .scale-btn {\n    width: 140px;\n    position: absolute;\n    bottom: 30px;\n    right: 30px;\n    z-index: 999;\n  }\n  .screen-content {\n    width: 100%;\n    height: 100%;\n    position: relative;\n    display: flex;\n    justify-content: center;\n    overflow: hidden;\n    img {\n      height: 100%;\n      display: block;\n    }\n    .screen-decoration {\n      position: absolute;\n      inset: 0;\n      .position-img {\n        display: block;\n        height: auto;\n      }\n      .position-top {\n        position: absolute;\n        top: 0;\n      }\n      .position-left {\n        position: absolute;\n        left: 8px;\n        top: 76px;\n        rotate: 180deg;\n      }\n      .position-right {\n        position: absolute;\n        right: 8px;\n        top: 76px;\n      }\n      .position-bottom {\n        width: calc(100% - 16px);\n        height: 16px;\n        position: absolute;\n        bottom: 0;\n        left: 8px;\n      }\n      .position-title {\n        position: absolute;\n        top: 16px;\n        z-index: 2;\n        text-align: center;\n        width: 100%;\n        font-weight: 0;\n        font-size: 40px;\n        color: #ffffff;\n        letter-spacing: 13.33px;\n        text-shadow: 0 0 20px #6191ff26;\n      }\n      .grid-stack {\n        position: absolute;\n        inset: 0;\n        height: 100%;\n        // width: calc(100% - 64px);\n        width: calc(100% - 32px);\n        // margin-left: 24px;\n        margin-left: 8px;\n      }\n      .grid-stack-style16 {\n        width: calc(100% - 32px);\n        margin-left: 8px;\n      }\n      .grid-stack-style21 {\n        width: calc(100% - 42px);\n        margin-left: 13px;\n      }\n      .grid-stack-style32 {\n        width: calc(100% - 64px);\n        margin-left: 24px;\n      }\n    }\n  }\n}\n@keyframes fadeIn {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n.grid-stack-item-content {\n  animation: fadeIn 1s ease-in-out forwards;\n}\n</style>\n\n","import mod from \"-!../../../node_modules/unplugin-auto-import/node_modules/unplugin/dist/webpack/loaders/transform.js??ruleSet[1].rules[33].use[0]!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!../../../node_modules/unplugin/dist/webpack/loaders/transform.js??ruleSet[1].rules[32].use[0]!./preview.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/unplugin-auto-import/node_modules/unplugin/dist/webpack/loaders/transform.js??ruleSet[1].rules[33].use[0]!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!../../../node_modules/unplugin/dist/webpack/loaders/transform.js??ruleSet[1].rules[32].use[0]!./preview.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./preview.vue?vue&type=template&id=1d344434&scoped=true\"\nimport script from \"./preview.vue?vue&type=script&lang=js\"\nexport * from \"./preview.vue?vue&type=script&lang=js\"\nimport style0 from \"./preview.vue?vue&type=style&index=0&id=1d344434&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1d344434\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"editor-frame--viewport\">\n    <PreviewRender\n      :screen=\"schemaObject.screen\"\n      :map=\"schemaObject.map\"\n      :nodes=\"schemaObject.nodes\"\n    />\n  </div>\n</template>\n\n\n\n<script >\nimport { getCurrentInstance } from '@vue/composition-api';\nimport PreviewRender from '@/designer/renderer/preview.vue';\nconst __sfc_main = {\n  name: 'Preview'\n};\n__sfc_main.setup = (__props, __ctx) => {\n  const {\n    proxy\n  } = getCurrentInstance();\n  const schema = localStorage.getItem('schema');\n  const schemaObject = JSON.parse(schema);\n  return {\n    schemaObject\n  };\n};\n__sfc_main.components = Object.assign({\n  PreviewRender\n}, __sfc_main.components);\nexport default __sfc_main;\n</script>\n\n<style lang=\"scss\" scoped>\n.editor-frame--viewport {\n  height: 100%;\n  overflow: auto;\n}\n</style>\n","import mod from \"-!../../node_modules/unplugin-auto-import/node_modules/unplugin/dist/webpack/loaders/transform.js??ruleSet[1].rules[33].use[0]!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!../../node_modules/unplugin/dist/webpack/loaders/transform.js??ruleSet[1].rules[32].use[0]!./preview.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/unplugin-auto-import/node_modules/unplugin/dist/webpack/loaders/transform.js??ruleSet[1].rules[33].use[0]!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[0]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!../../node_modules/unplugin/dist/webpack/loaders/transform.js??ruleSet[1].rules[32].use[0]!./preview.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./preview.vue?vue&type=template&id=9a437fb4&scoped=true\"\nimport script from \"./preview.vue?vue&type=script&lang=js\"\nexport * from \"./preview.vue?vue&type=script&lang=js\"\nimport style0 from \"./preview.vue?vue&type=style&index=0&id=9a437fb4&prod&lang=scss&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9a437fb4\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","schemaObject","screen","map","nodes","staticRenderFns","style","screenWidth","screenHeight","getMinValue","defaultLeft","defaultTop","scaleSize","curMapId","_l","imgItem","index","key","class","position","column","_v","_s","screenTitle","item","id","w","h","x","y","componentName","_b","tag","props","__sfc_main","name","components","View1","View2","Condition","MapDocument","type","Array","default","Object","setup","__props","__ctx","computed","mapId","title","decorationImgList","bg","ref","SCREEN_SIZE","value","width","height","scaleWidth","window","innerWidth","scaleHeight","innerHeight","grid","nodesArr","onMounted","GridStack","init","acceptWidgets","marginTop","marginBottom","marginLeft","marginRight","disableResize","float","row","cellHeight","nextTick","disable","forEach","makeWidget","setupDragIn","appendTo","helper","component","proxy","getCurrentInstance","schema","localStorage","getItem","JSON","parse","assign","PreviewRender"],"sourceRoot":""}