"use strict";(self["webpackChunkvue2_composition_api"]=self["webpackChunkvue2_composition_api"]||[]).push([[272],{3958:function(e,t,i){i.r(t),i.d(t,{default:function(){return C}});var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"editor-frame--viewport"},[i("PreviewRender",{attrs:{screen:e.schemaObject.screen,map:e.schemaObject.map,nodes:e.schemaObject.nodes}})],1)},s=[],a=i(5738),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"preview-view"},[n("div",{staticClass:"screen-content",style:"width:"+e.screenWidth+"px;height:"+e.screenHeight+"px;\n      transform:translate("+e.getMinValue(e.defaultLeft)+"px, "+e.getMinValue(e.defaultTop)+"px) scale("+e.scaleSize/100+");transform-origin:0 0;"},[n("img",{attrs:{src:i(3611)("./map"+e.curMapId+".png"),alt:""}}),n("div",{staticClass:"screen-decoration"},[e._l(e.decorationImgList,(function(t,s){return n("img",{key:s,staticClass:"position-img",class:t.position,attrs:{src:i(2860)("./"+e.column+"/"+t.bg+".png")}})})),n("div",{staticClass:"position-title"},[e._v(e._s(e.screenTitle))]),n("div",{staticClass:"grid-stack",class:"grid-stack-style"+e.column},e._l(e.nodesArr,(function(t){return n("div",{key:t.id,staticClass:"grid-stack-item",attrs:{"gs-id":t.id,id:t.id,"gs-w":t.w,"gs-h":t.h,"gs-x":t.x,"gs-y":t.y}},[n("div",{staticClass:"grid-stack-item-content"},[n(t.componentName,e._b({tag:"component",attrs:{node:t}},"component",t.props,!1))],1)])})),0)],2)])])},r=[],c=i(8887),l=i(9006),p=i(5090),d=i(115),u=i(6107),g=i(1556);const m={name:"PreviewRender",components:{View1:p.A,View2:d.A,Condition:u.A,MapDocument:g.A}};m.props={nodes:{type:Array,default:()=>[]},map:{type:Object,default:()=>({})},screen:{type:Object,default:()=>({})}},m.setup=(e,t)=>{const i=e,n=(0,a.EW)((()=>i.map.props.mapId)),s=(0,a.EW)((()=>i.map.props.column)),o=(0,a.EW)((()=>i.screen.props.title)),r=[{bg:"top-bg",position:"position-top"},{bg:"right-bg",position:"position-left"},{bg:"right-bg",position:"position-right"},{bg:"bottom-bg",position:"position-bottom"}],p=(0,a.KR)(l.R[s.value].width),d=(0,a.KR)(l.R[s.value].height),u=(0,a.KR)(window.innerWidth/p.value*100),g=(0,a.KR)(window.innerHeight/d.value*100),m=(0,a.EW)((()=>u.value<g.value?u.value:g.value)),v=(0,a.KR)((window.innerHeight-window.innerWidth/p.value*d.value)/2),h=(0,a.KR)((window.innerWidth-window.innerHeight/d.value*p.value)/2),w=e=>e<0?0:e,f=(0,a.KR)(null),b=(0,a.KR)([]);return(0,a.sV)((async()=>{f.value=c.dn.init({acceptWidgets:!0,marginTop:0,marginBottom:16,marginLeft:16,marginRight:0,disableResize:!0,float:!0,row:10,cellHeight:"108px"}),b.value=i.nodes,await(0,a.dY)(),f.value.column(s.value),f.value.disable(!1),b.value.forEach((e=>{f.value.makeWidget(`#${e.id}`)})),c.dn.setupDragIn(".sidebar .grid-stack-item",{appendTo:"body",helper:"clone"})})),{curMapId:n,column:s,screenTitle:o,decorationImgList:r,screenWidth:p,screenHeight:d,scaleSize:m,defaultTop:v,defaultLeft:h,getMinValue:w,nodesArr:b}};var v=m,h=v,w=i(1656),f=(0,w.A)(h,o,r,!1,null,"1d344434",null),b=f.exports;const R={name:"Preview",setup:(e,t)=>{const{proxy:i}=(0,a.nI)(),n=localStorage.getItem("schema"),s=JSON.parse(n);return{schemaObject:s}}};R.components=Object.assign({PreviewRender:b},R.components);var y=R,_=y,k=(0,w.A)(_,n,s,!1,null,"9a437fb4",null),C=k.exports}}]);
//# sourceMappingURL=272.f88cd5a3.js.map