(self["webpackChunkvue2_composition_api"]=self["webpackChunkvue2_composition_api"]||[]).push([[285],{550:function(e,t,n){"use strict";n.d(t,{Ld:function(){return S}});var r=function(e){return function(t){return null!=t&&(Array.isArray(e)?e:[e]).some((function(e){return o(t)==="[object "+e+"]"}))}},o=function(e){return Object.prototype.toString.call(e)},a=r(["Function","AsyncFunction","GeneratorFunction"]),s=r("Window"),i=Array.isArray,l=(r("Object"),r("String"),r("Boolean"),r("Number"),r("RegExp"),Symbol("UNSUBSCRIBE_ID_SYMBOL")),u=function(){function e(){var e=this;this.subscribers={index:0},this.unsubscribe=function(t){if(void 0!==t&&null!==t)a(t)?delete e.subscribers[t[l]]:delete e.subscribers[t];else for(var n in e.subscribers)e.unsubscribe(n)}}return e.prototype.dispatch=function(e,t){var n=!1;for(var r in this.subscribers)a(this.subscribers[r])&&(e["context"]=t,!1===this.subscribers[r](e)&&(n=!0));return!n},e.prototype.subscribe=function(e){var t,n=this;a(e)&&(t=this.subscribers.index+1,this.subscribers[t]=e,this.subscribers.index++);var r=function(){n.unsubscribe(t)};return r[l]=t,r},e}();function c(){try{if("undefined"!==typeof self)return self}catch(e){}try{if("undefined"!==typeof d)return d}catch(e){}try{if("undefined"!==typeof n.g)return n.g}catch(e){}return Function("return this")()}var p,d=c(),f=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=Symbol("ATTACHED_SYMBOL"),m=Symbol("__EVENTS_SYMBOL__"),v=Symbol("EVENTS_ONCE_SYMBOL"),b=Symbol("EVENTS_BATCH_SYMBOL"),y=Symbol("DRIVER_INSTANCES_SYMBOL"),g=function(e){return"onlyOne"===e||"onlyChild"===e||"onlyParent"===e};(function(){function e(e,t){this.container=document,this.contentWindow=d,this.engine=e,this.context=t}e.prototype.dispatch=function(e){return this.engine.dispatch(e,this.context)},e.prototype.subscribe=function(e){return this.engine.subscribe(e)},e.prototype.subscribeTo=function(e,t){return this.engine.subscribeTo(e,t)},e.prototype.subscribeWith=function(e,t){return this.engine.subscribeWith(e,t)},e.prototype.attach=function(e){console.error("attach must implement.")},e.prototype.detach=function(e){console.error("attach must implement.")},e.prototype.eventTarget=function(e){var t;return"resize"!==e&&"scroll"!==e||this.container!==(null===(t=this.contentWindow)||void 0===t?void 0:t.document)?this.container:this.contentWindow},e.prototype.addEventListener=function(e,t,n){var r,o,a,s,i=this.eventTarget(e);if(g(null===n||void 0===n?void 0:n.mode)){i[v]=i[v]||{};var l=this["constructor"];l[v]=l[v]||{};var u=i[v][e],c=l[v][e];if(!u){if(c)if("onlyChild"===n.mode)c.contains(i)&&(c.removeEventListener(e,c[v][e],n),delete c[v][e]);else if("onlyParent"===n.mode&&c.contains(i))return;i.addEventListener(e,t,n),i[v][e]=t,l[v][e]=i}}else i[m]=i[m]||{},i[m][e]=i[m][e]||new Map,(null===(o=null===(r=i[m][e])||void 0===r?void 0:r.get)||void 0===o?void 0:o.call(r,t))||(i.addEventListener(e,t,n),null===(s=null===(a=i[m][e])||void 0===a?void 0:a.set)||void 0===s||s.call(a,t,!0))},e.prototype.removeEventListener=function(e,t,n){var r,o,a=this.eventTarget(e);if(g(null===n||void 0===n?void 0:n.mode)){var s=this["constructor"];s[v]=s[v]||{},a[v]=a[v]||{},delete s[v][e],delete a[v][e],a.removeEventListener(e,t,n)}else a[m]=a[m]||{},a[m][e]=a[m][e]||new Map,null===(o=null===(r=a[m][e])||void 0===r?void 0:r.delete)||void 0===o||o.call(r,t),a.removeEventListener(e,t,n)},e.prototype.batchAddEventListener=function(e,t,n){this.engine[y]=this.engine[y]||[],this.engine[y].includes(this)||this.engine[y].push(this),this.engine[y].forEach((function(r){var o=r.eventTarget(e);o[b]=o[b]||{},o[b][e]||(o.addEventListener(e,t,n),o[b][e]=t)}))},e.prototype.batchRemoveEventListener=function(e,t,n){this.engine[y]=this.engine[y]||[],this.engine[y].forEach((function(r){var o=r.eventTarget(e);o[b]=o[b]||{},o.removeEventListener(e,t,n),delete o[b][e]}))}})(),function(e){function t(t){var n=e.call(this)||this;return n.drivers=[],n.containers=[],i(null===t||void 0===t?void 0:t.effects)&&t.effects.forEach((function(e){e(n)})),i(null===t||void 0===t?void 0:t.drivers)&&(n.drivers=t.drivers),n}f(t,e),t.prototype.subscribeTo=function(e,t){return this.subscribe((function(n){if(e&&n instanceof e)return t(n)}))},t.prototype.subscribeWith=function(e,t){return this.subscribe((function(n){if(i(e)){if(e.includes(null===n||void 0===n?void 0:n.type))return t(n)}else if(e&&(null===n||void 0===n?void 0:n.type)===e)return t(n)}))},t.prototype.attachEvents=function(e,t,n){var r=this;if(void 0===t&&(t=d),e)return s(e)?this.attachEvents(e.document,e,n):void(e[h]||(e[h]=this.drivers.map((function(o){var a=new o(r,n);return a.contentWindow=t,a.container=e,a.attach(e),a})),this.containers.includes(e)||this.containers.push(e)))},t.prototype.detachEvents=function(e){var t=this;if(e)return s(e)?this.detachEvents(e.document):void(e[h]&&(e[h].forEach((function(t){t.detach(e)})),this[y]=this[y]||[],this[y]=this[y].reduce((function(t,n){return n.container===e?(n.detach(e),t):t.concat(n)}),[]),this.containers=this.containers.filter((function(t){return t!==e})),delete e[h],delete e[m],delete e[v],delete e[b]));this.containers.forEach((function(e){t.detachEvents(e)}))}}(u),function(){function e(e,t){this.x=e,this.y=t}}();(function(e){e["Inner1"]="I1",e["Inner2"]="I2",e["Inner3"]="I3",e["Inner4"]="I4",e["Outer1"]="O1",e["Outer2"]="O2",e["Outer3"]="O3",e["Outer4"]="O4"})(p||(p={}));var _=36,w="";while(_--)w+=_.toString(36);function S(e){var t="",n=e||11;while(n--)t+=w[36*Math.random()|0];return t}var E=Symbol("newer"),x=Symbol("older");function D(e,t){this.key=e,this.value=t,this[E]=void 0,this[x]=void 0}(function(){function e(e,t){"number"!==typeof e&&(t=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,t&&(this.assign(t),e<1&&(this.limit=this.size))}e.prototype._markEntryAsUsed=function(e){e!==this.newest&&(e[E]&&(e===this.oldest&&(this.oldest=e[E]),e[E][x]=e[x]),e[x]&&(e[x][E]=e[E]),e[E]=void 0,e[x]=this.newest,this.newest&&(this.newest[E]=e),this.newest=e)},e.prototype.assign=function(e){var t,n=this.limit||Number.MAX_VALUE;this._keymap.clear();for(var r=e[Symbol.iterator](),o=r.next();!o.done;o=r.next()){var a=new D(o.value[0],o.value[1]);if(this._keymap.set(a.key,a),t?(t[E]=a,a[x]=t):this.oldest=a,t=a,0===n--)throw new Error("overflow")}this.newest=t,this.size=this._keymap.size},e.prototype.get=function(e){var t=this._keymap.get(e);if(t)return this._markEntryAsUsed(t),t.value},e.prototype.set=function(e,t){var n=this._keymap.get(e);return n?(n.value=t,this._markEntryAsUsed(n),this):(this._keymap.set(e,n=new D(e,t)),this.newest?(this.newest[E]=n,n[x]=this.newest):this.oldest=n,this.newest=n,++this.size,this.size>this.limit&&this.shift(),this)},e.prototype.shift=function(){var e=this.oldest;if(e)return this.oldest[E]?(this.oldest=this.oldest[E],this.oldest[x]=void 0):(this.oldest=void 0,this.newest=void 0),e[E]=e[x]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]},e.prototype.find=function(e){var t=this._keymap.get(e);return t?t.value:void 0},e.prototype.has=function(e){return this._keymap.has(e)},e.prototype.delete=function(e){var t=this._keymap.get(e);if(t)return this._keymap.delete(t.key),t[E]&&t[x]?(t[x][E]=t[E],t[E][x]=t[x]):t[E]?(t[E][x]=void 0,this.oldest=t[E]):t[x]?(t[x][E]=void 0,this.newest=t[x]):this.oldest=this.newest=void 0,this.size--,t.value},e.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()},e.prototype.keys=function(){return new k(this.oldest)},e.prototype.values=function(){return new A(this.oldest)},e.prototype.entries=function(){},e.prototype.forEach=function(e,t){"object"!==typeof t&&(t=this);var n=this.oldest;while(n)e.call(t,n.value,n.key,this),n=n[E]},e.prototype.toJSON=function(){var e=new Array(this.size),t=0,n=this.oldest;while(n)e[t++]={key:n.key,value:n.value},n=n[E];return e},e.prototype.toString=function(){var e="",t=this.oldest;while(t)e+=String(t.key)+":"+t.value,t=t[E],t&&(e+=" < ");return e},e.prototype[Symbol.iterator]=function(){return new C(this.oldest)}})();var C=function(){function e(e){this.entry=e}return e.prototype[Symbol.iterator]=function(){return this},e.prototype.next=function(){var e=this.entry;return e?(this.entry=e[E],{done:!1,value:[e.key,e.value]}):{done:!0,value:void 0}},e}(),k=function(){function e(e){this.entry=e}return e.prototype[Symbol.iterator]=function(){return this},e.prototype.next=function(){var e=this.entry;return e?(this.entry=e[E],{done:!1,value:e.key}):{done:!0,value:void 0}},e}(),A=function(){function e(e){this.entry=e}return e.prototype[Symbol.iterator]=function(){return this},e.prototype.next=function(){var e=this.entry;return e?(this.entry=e[E],{done:!1,value:e.value}):{done:!0,value:void 0}},e}();var q;(function(e){e["Backspace"]="Backspace",e["Tab"]="Tab",e["Enter"]="Enter",e["Shift"]="Shift",e["Control"]="Control",e["Alt"]="Alt",e["CapsLock"]="CapsLock",e["Escape"]="Escape",e["Space"]=" ",e["PageUp"]="PageUp",e["PageDown"]="PageDown",e["End"]="End",e["Home"]="Home",e["ArrowLeft"]="ArrowLeft",e["ArrowUp"]="ArrowUp",e["ArrowRight"]="ArrowRight",e["ArrowDown"]="ArrowDown",e["Left"]="Left",e["Up"]="Up",e["Right"]="Right",e["Down"]="Down",e["Insert"]="Insert",e["Delete"]="Delete",e["Zero"]="0",e["ClosedParen"]=")",e["One"]="1",e["ExclamationMark"]="!",e["Two"]="2",e["AtSign"]="@",e["Three"]="3",e["PoundSign"]="£",e["Hash"]="#",e["Four"]="4",e["DollarSign"]="$",e["Five"]="5",e["PercentSign"]="%",e["Six"]="6",e["Caret"]="^",e["Hat"]="^",e["Seven"]="7",e["Ampersand"]="&",e["Eight"]="8",e["Star"]="*",e["Asterisk"]="*",e["Nine"]="9",e["OpenParen"]="(",e["a"]="a",e["b"]="b",e["c"]="c",e["d"]="d",e["e"]="e",e["f"]="f",e["g"]="g",e["h"]="h",e["i"]="i",e["j"]="j",e["k"]="k",e["l"]="l",e["m"]="m",e["n"]="n",e["o"]="o",e["p"]="p",e["q"]="q",e["r"]="r",e["s"]="s",e["t"]="t",e["u"]="u",e["v"]="v",e["w"]="w",e["x"]="x",e["y"]="y",e["z"]="z",e["A"]="A",e["B"]="B",e["C"]="C",e["D"]="D",e["E"]="E",e["F"]="F",e["G"]="G",e["H"]="H",e["I"]="I",e["J"]="J",e["K"]="K",e["L"]="L",e["M"]="M",e["N"]="N",e["O"]="O",e["P"]="P",e["Q"]="Q",e["R"]="R",e["S"]="S",e["T"]="T",e["U"]="U",e["V"]="V",e["W"]="W",e["X"]="X",e["Y"]="Y",e["Z"]="Z",e["Meta"]="Meta",e["LeftWindowKey"]="Meta",e["RightWindowKey"]="Meta",e["Numpad0"]="0",e["Numpad1"]="1",e["Numpad2"]="2",e["Numpad3"]="3",e["Numpad4"]="4",e["Numpad5"]="5",e["Numpad6"]="6",e["Numpad7"]="7",e["Numpad8"]="8",e["Numpad9"]="9",e["Multiply"]="*",e["Add"]="+",e["Subtract"]="-",e["DecimalPoint"]=".",e["MSDecimalPoint"]="Decimal",e["Divide"]="/",e["F1"]="F1",e["F2"]="F2",e["F3"]="F3",e["F4"]="F4",e["F5"]="F5",e["F6"]="F6",e["F7"]="F7",e["F8"]="F8",e["F9"]="F9",e["F10"]="F10",e["F11"]="F11",e["F12"]="F12",e["NumLock"]="NumLock",e["ScrollLock"]="ScrollLock",e["SemiColon"]=";",e["Equals"]="=",e["Comma"]=",",e["Dash"]="-",e["Period"]=".",e["UnderScore"]="_",e["PlusSign"]="+",e["ForwardSlash"]="/",e["Tilde"]="~",e["GraveAccent"]="`",e["OpenBracket"]="[",e["ClosedBracket"]="]",e["Quote"]="'"})(q||(q={}));n(8939),new Set(["A","ABBR","ACRONYM","AUDIO","B","BDI","BDO","BIG","BR","BUTTON","CANVAS","CITE","CODE","DATA","DATALIST","DEL","DFN","EM","EMBED","I","IFRAME","IMG","INS","KBD","LABEL","MAP","MARK","METER","NOSCRIPT","OBJECT","OUTPUT","PICTURE","PROGRESS","Q","RUBY","S","SAMP","SELECT","SLOT","SMALL","STRONG","SUB","SUP","SVG","TEMPLATE","TEXTAREA","TIME","U","TT","VAR","VIDEO","WBR","INPUT","SPAN"])},1873:function(e,t,n){var r=n(9325),o=r.Symbol;e.exports=o},2552:function(e,t,n){var r=n(1873),o=n(659),a=n(9350),s="[object Null]",i="[object Undefined]",l=r?r.toStringTag:void 0;function u(e){return null==e?void 0===e?i:s:l&&l in Object(e)?o(e):a(e)}e.exports=u},4128:function(e,t,n){var r=n(1800),o=/^\s+/;function a(e){return e?e.slice(0,r(e)+1).replace(o,""):e}e.exports=a},4840:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},659:function(e,t,n){var r=n(1873),o=Object.prototype,a=o.hasOwnProperty,s=o.toString,i=r?r.toStringTag:void 0;function l(e){var t=a.call(e,i),n=e[i];try{e[i]=void 0;var r=!0}catch(l){}var o=s.call(e);return r&&(t?e[i]=n:delete e[i]),o}e.exports=l},9350:function(e){var t=Object.prototype,n=t.toString;function r(e){return n.call(e)}e.exports=r},9325:function(e,t,n){var r=n(4840),o="object"==typeof self&&self&&self.Object===Object&&self,a=r||o||Function("return this")();e.exports=a},1800:function(e){var t=/\s/;function n(e){var n=e.length;while(n--&&t.test(e.charAt(n)));return n}e.exports=n},8221:function(e,t,n){var r=n(3805),o=n(124),a=n(9374),s="Expected a function",i=Math.max,l=Math.min;function u(e,t,n){var u,c,p,d,f,h,m=0,v=!1,b=!1,y=!0;if("function"!=typeof e)throw new TypeError(s);function g(t){var n=u,r=c;return u=c=void 0,m=t,d=e.apply(r,n),d}function _(e){return m=e,f=setTimeout(E,t),v?g(e):d}function w(e){var n=e-h,r=e-m,o=t-n;return b?l(o,p-r):o}function S(e){var n=e-h,r=e-m;return void 0===h||n>=t||n<0||b&&r>=p}function E(){var e=o();if(S(e))return x(e);f=setTimeout(E,w(e))}function x(e){return f=void 0,y&&u?g(e):(u=c=void 0,d)}function D(){void 0!==f&&clearTimeout(f),m=0,u=h=c=f=void 0}function C(){return void 0===f?d:x(o())}function k(){var e=o(),n=S(e);if(u=arguments,c=this,h=e,n){if(void 0===f)return _(h);if(b)return clearTimeout(f),f=setTimeout(E,t),g(h)}return void 0===f&&(f=setTimeout(E,t)),d}return t=a(t)||0,r(n)&&(v=!!n.leading,b="maxWait"in n,p=b?i(a(n.maxWait)||0,t):p,y="trailing"in n?!!n.trailing:y),k.cancel=D,k.flush=C,k}e.exports=u},3805:function(e){function t(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=t},346:function(e){function t(e){return null!=e&&"object"==typeof e}e.exports=t},4394:function(e,t,n){var r=n(2552),o=n(346),a="[object Symbol]";function s(e){return"symbol"==typeof e||o(e)&&r(e)==a}e.exports=s},124:function(e,t,n){var r=n(9325),o=function(){return r.Date.now()};e.exports=o},7350:function(e,t,n){var r=n(8221),o=n(3805),a="Expected a function";function s(e,t,n){var s=!0,i=!0;if("function"!=typeof e)throw new TypeError(a);return o(n)&&(s="leading"in n?!!n.leading:s,i="trailing"in n?!!n.trailing:i),r(e,t,{leading:s,maxWait:t,trailing:i})}e.exports=s},9374:function(e,t,n){var r=n(4128),o=n(3805),a=n(4394),s=NaN,i=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;function p(e){if("number"==typeof e)return e;if(a(e))return s;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=l.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):i.test(e)?s:+e}e.exports=p},8939:function(e,t,n){var r,o,a;(function(n){o=[],r=n,a="function"===typeof r?r.apply(t,o):r,void 0===a||(e.exports=a)})((function(){"use strict";var e,t,r,o,a="undefined"!=typeof window?window:void 0!=typeof n.g?n.g:this||{},s=a.cancelRequestAnimationFrame&&a.requestAnimationFrame||setTimeout,i=a.cancelRequestAnimationFrame||clearTimeout,l=[],u=0,c=!1,p=7,d=35,f=125,h=0,m=0,v=0,b={get didTimeout(){return!1},timeRemaining:function(){var e=p-(Date.now()-m);return e<0?0:e}},y=g((function(){p=22,f=66,d=0}));function g(e){var t,n,r=99,o=function(){var a=Date.now()-n;a<r?t=setTimeout(o,r-a):(t=null,e())};return function(){n=Date.now(),t||(t=setTimeout(o,r))}}function _(){c&&(o&&i(o),r&&clearTimeout(r),c=!1)}function w(){125!=f&&(p=7,f=125,d=35,c&&(_(),x())),y()}function S(){o=null,r=setTimeout(D,0)}function E(){r=null,s(S)}function x(){c||(t=f-(Date.now()-m),e=Date.now(),c=!0,d&&t<d&&(t=d),t>9?r=setTimeout(E,t):(t=0,E()))}function D(){var n,o,a,s=p>9?9:1;if(m=Date.now(),c=!1,r=null,u>2||m-t-50<e)for(o=0,a=l.length;o<a&&b.timeRemaining()>s;o++)n=l.shift(),v++,n&&n(b);l.length?x():u=0}function C(e){return h++,l.push(e),x(),h}function k(e){var t=e-1-v;l[t]&&(l[t]=null)}if(a.requestIdleCallback&&a.cancelIdleCallback)try{a.requestIdleCallback((function(){}),{timeout:0})}catch(A){(function(e){var t,n;if(a.requestIdleCallback=function(t,n){return n&&"number"==typeof n.timeout?e(t,n.timeout):e(t)},a.IdleCallbackDeadline&&(t=IdleCallbackDeadline.prototype)){if(n=Object.getOwnPropertyDescriptor(t,"timeRemaining"),!n||!n.configurable||!n.get)return;Object.defineProperty(t,"timeRemaining",{value:function(){return n.get.call(this)},enumerable:!0,configurable:!0})}})(a.requestIdleCallback)}else a.requestIdleCallback=C,a.cancelIdleCallback=k,a.document&&document.addEventListener&&(a.addEventListener("scroll",w,!0),a.addEventListener("resize",w),document.addEventListener("focus",w,!0),document.addEventListener("mouseover",w,!0),["click","keypress","touchstart","mousedown"].forEach((function(e){document.addEventListener(e,w,{capture:!0,passive:!0})})),a.MutationObserver&&new MutationObserver(w).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}));return{request:C,cancel:k}}))},6567:function(e,t,n){"use strict";n.d(t,{A:function(){return f}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-drawer",{staticClass:"setter-panel",attrs:{title:e.selectionName,visible:e.drawerVisible,modal:!1,size:"260","before-close":e.handleClose},on:{"update:visible":function(t){e.drawerVisible=t}}},[e.activeNode?n("div",{key:e.selectionName},e._l(e.activeNode.componentMeta.configure,(function(t,r){return n("div",{key:r,attrs:{label:t.title}},[n("div",{staticClass:"setter-panel-tool"},[n("div",{staticClass:"setter-panel-title"},[e._v(e._s(t.title))]),n("i",{staticClass:"qax-icon-reset-irregular reset",attrs:{title:"恢复默认值"}})]),n("q-form",{ref:"formRef",refInFor:!0,attrs:{model:e.form,rules:e.formRules}},e._l(t.override,(function(t,r){return n("div",{key:r},[e.isShow(t.name)?[n("q-form-item",{attrs:{label:e.getLabel(t),"label-width":e.getLabelWidth(t),"label-position":e.getLabelPosition(t),prop:t.name}},[n(e.getSetter(t.setter),e._b({tag:"component",attrs:{value:e.getValue(t.name),"on-change":e.getChange(t)}},"component",e.getProps(t.setter),!1)),n("q-tooltip",{attrs:{content:e.getPropValue(t,"tooltip")}},[e.getPropValue(t,"tooltip")?n("i",{staticClass:"qax-icon-Question-outline tooltip-btn"}):e._e()])],1)]:e._e()],2)})),0)],1)})),0):e._e()])},o=[],a=n(5738),s=n(2543),i=n(5206);const l={name:"SetterPanel",setup:(e,t)=>{const{proxy:n}=(0,a.nI)(),r=(0,i.ZY)(),o=r.value.selection,l=(0,i.Vu)();(0,a.wB)((()=>o.value),(()=>{console.log(o.value,"selection.value"),(0,a.dY)((()=>{l.value.settersFormInstance=n.$refs.formRef[0]}))}));const u=(0,a.EW)((()=>r.value.activeNode.value)),c=(0,a.EW)((()=>!!o.value)),p=(0,a.EW)((()=>{const e=o.value?.type;return("screen"===e?"大屏配置":"组件属性配置")+`(${e})`})),d=(0,a.KR)({}),f=(0,a.EW)((()=>o.value?.generateValidateRules())),h=e=>u.value.props[e],m=e=>{const t=e.name,n=u.value.componentMeta.props.find((e=>e.name===t));return n?.desc||""},v=e=>{const t=u.value.componentMeta.props.find((t=>t.name===e));return!1!==t?.visible},b=e=>{const t="80px",n=E(e.setter);return n.labelWidth||t},y=e=>{const t=E(e.setter);return t.position||"left"},g=(e,t)=>{const n=E(e.setter);return n[t]||""},_=e=>(0,s.get)(e,"setter.props.onBeforeChange",(e=>e)),w=e=>{const t=e.name,n=_(e);return e=>{o.value.props[t]=n(e,o)}},S=e=>"string"===typeof e?e:(0,s.get)(e,"componentName"),E=e=>{if("string"===typeof e)return{};const t=(0,s.get)(e,"props",{});for(const n in t)t[n]instanceof Promise&&t[n].then((e=>{t[n]=e}));return t},x=()=>{o.value=null};return{activeNode:u,drawerVisible:c,selectionName:p,form:d,formRules:f,getValue:h,getLabel:m,isShow:v,getLabelWidth:b,getLabelPosition:y,getPropValue:g,getChange:w,getSetter:S,getProps:E,handleClose:x}}};var u=l,c=u,p=n(1656),d=(0,p.A)(c,r,o,!1,null,"35aa8ab7",null),f=d.exports},5206:function(e,t,n){"use strict";n.d(t,{ZY:function(){return i},hb:function(){return l},Vu:function(){return s}});var r=n(5738),o=n(8642);function a(){return(0,r.WQ)(o.k)}function s(){const e=a();return(0,r.EW)((()=>e?.value.workbench))}function i(){const e=a();return(0,r.EW)((()=>e?.value.document))}function l(){const e=a();return(0,r.EW)((()=>e?.value.dragon))}},8495:function(e,t,n){"use strict";n.d(t,{b:function(){return a}});var r=n(550),o=n(2543);class a{id;props;componentName;componentMeta;type;w;h;x;y;constructor(e){this.id=e.id||`node_${(0,r.Ld)()}`,this.props=e.props||this.meta2Props(e.componentMeta),this.componentName=e.componentName,this.componentMeta=e.componentMeta,this.type=e.type,this.w=e.w,this.h=e.h,this.x=e.x,this.y=e.y}get propsMeta(){return(0,o.get)(this.componentMeta,"props",[])}meta2Props(e){const t={},{props:n}=e;return n.forEach((e=>{t[e.name]=(0,o.cloneDeep)(e.defaultValue)})),t}validator(){for(const e of this.propsMeta){if("string"===(0,o.get)(e,"rules.type")&&e.rules.required&&(0,o.isEmpty)(this.props?.[e.name]))return void new Error(`${e.desc}不能为空`);if("array"===(0,o.get)(e,"rules.type")&&e.rules.required){const t=this.props?.[e.name];if((0,o.isEmpty)(t))return void new Error(`${e.desc}不能为空`)}}return!0}generateValidateRules(){const e={};for(const t of this.propsMeta){if("string"===(0,o.get)(t,"rules.type")&&t.rules.required){const n=(e,n,r)=>{(0,o.isEmpty)(this.props?.[t.name])?r(new Error(`${t.desc}不能为空`)):r()};e[t.name]=[{required:!0,validator:n,trigger:"blur"}]}if("array"===(0,o.get)(t,"rules.type")&&t.rules.required){const n=(e,n,r)=>{(0,o.isEmpty)(n)?r(new Error(`${t.desc}不能为空`)):r()};e[t.name]=[{required:!0,validator:n,message:`${t.desc}不能为空`,trigger:"blur"}]}}return e}getSchema(){return{id:this.id,type:this.type,componentName:this.componentName,props:this.props||{},w:this.w,h:this.h,x:this.x,y:this.y}}}},8171:function(e,t,n){"use strict";n.d(t,{A:function(){return Ht}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" "+e._s(e.value)+" ")])},o=[],a=n(5738),s=(0,a.pM)({name:"StringSetter",props:{value:{type:String,default:""}}}),i=s,l=n(1656),u=(0,l.A)(i,r,o,!1,null,null,null),c=u.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-input",{attrs:{value:e.value,type:e.type,maxlength:e.maxlength,autosize:{minRows:4,maxRows:6},"show-word-limit":"",placeholder:"请输入"},on:{input:e.onChange}})},d=[];const f={};f.props={value:{type:String,default:""},type:{type:String,default:"text"},maxlength:{type:Number,default:32},onChange:{type:Function,default:()=>{}}};var h=f,m=h,v=(0,l.A)(m,p,d,!1,null,null,null),b=v.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"number-setter"},[n("q-input-number",{attrs:{max:e.max,min:e.min,"controls-position":"right"},on:{change:e.onChange},model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}}),n("span",[e._v(e._s(e.text))])],1)},g=[],_=(0,a.pM)({name:"NumberSetter",props:{value:{type:Number,default:0},text:{type:String,default:""},max:{type:Number,default:60},min:{type:Number,default:1},onChange:{type:Function,default:()=>{}}},setup(e){return{_value:(0,a.EW)({get:()=>e.value,set:t=>e.onChange(t)})}}}),w=_,S=(0,l.A)(w,y,g,!1,null,"58bb5552",null),E=S.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-switch",{attrs:{value:e.value},on:{change:e.onChange}})},D=[],C=(0,a.pM)({name:"BooleanSetter",props:{value:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}}}}),k=C,A=(0,l.A)(k,x,D,!1,null,null,null),q=A.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-select",{staticStyle:{width:"100%"},model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}},e._l(e.options,(function(e){return n("q-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)},T=[],R=(0,a.pM)({name:"SelectSetter",props:{value:{type:String,default:""},onChange:{type:Function,default:()=>{}},options:{type:Array,default:()=>[]}},setup(e){return{_value:(0,a.EW)({get:()=>e.value,set:t=>e.onChange(t)})}}}),O=R,I=(0,l.A)(O,N,T,!1,null,null,null),M=I.exports,L=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"edit-mock-setter"},[n("div",{staticClass:"edit-btn"},[n("q-button",{attrs:{type:"text"},on:{click:e.handleDrawer}},[e._v(" 编辑静态数据 ")]),n("q-tooltip",[n("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 动态数据："+e._s(e.dataDrilling?"支持":"不支持")+"下钻 "),n("br"),e._v(" 静态数据："+e._s(e.mockDrilling?"支持":"不支持")+"下钻 ")]),n("i",{staticClass:"qax-icon-Question-outline tooltip-icon"})])],1),n("q-drawer",{attrs:{title:"编辑静态数据",size:"800px",wrapperClosable:!1,visible:e.drawer},on:{"update:visible":function(t){e.drawer=t}}},[n("q-tabs",{attrs:{type:"card","before-leave":e.onBeforeTabLeave},model:{value:e.activeMode,callback:function(t){e.activeMode=t},expression:"activeMode"}},[n("q-tab-pane",{attrs:{label:"可视模式",name:"table"}},[e.activeTableTab?n("DynamicTable",{ref:"dynamicTableRef",attrs:{"table-head-data":e.tableHeadData,"data-ids":e.tableDataIds,"is-custom-row":e.isCustomRow,disabled:!1}}):e._e()],1),n("q-tab-pane",{attrs:{label:"Json模式",name:"json"}},[n("JsonEditor",{ref:"jsonEditorRef",attrs:{"data-ids":e.tableDataIds}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("q-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("确定")])],1)],1)],1)},P=[],$=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dynamic-table"},[n("div",{staticClass:"add-btn"},[n("q-button",{attrs:{disabled:e.addDisabled,type:"primary",icon:"qax-icon-Alone-Plus"},on:{click:e.handleAdd}},[e._v(" 增加一行 ")])],1),n("q-form",{ref:"formRef",staticClass:"dynamic-form",attrs:{model:e.form,disabled:e.disabled}},[n("VirtualScrollTable",{attrs:{buffer:30,data:e.formData.tableData,height:73,"key-prop":"_index"},on:{change:function(t){return e.form.virtualList=t}}},[n("q-table",{ref:"tableRef",staticClass:"edit-table w-full mt-8",attrs:{data:e.form.virtualList,height:"360"}},[e._l(e.tableHeadData,(function(t){return n("q-table-column",e._b({key:t.prop,scopedSlots:e._u([{key:"default",fn:function(r){var o=r.row,a=r.$index;return[n("q-form-item",{attrs:{prop:"virtualList."+a+"."+t.prop,rules:{required:t.required,message:t.label+"不能为空"}}},[n(t.component,e._b({tag:"component",model:{value:o[t.prop],callback:function(n){e.$set(o,t.prop,n)},expression:"row[item.prop]"}},"component",t.componentProps,!1))],1)]}}],null,!0)},"q-table-column",t,!1))})),n("q-table-column",{attrs:{label:"操作",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("q-button",{attrs:{disabled:!e.isCustomRow,icon:"qax-icon-Trash",type:"text",title:"删除",size:"medium",danger:""},on:{click:function(n){return e.handleDelete(t.row._index)}}})]}}])})],2)],1)],1)],1)},F=[],j=(n(4114),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.name,e._g(e._b({tag:"component"},"component",e.$attrs,!1),e.$listeners))}),V=[],B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-select",e._g(e._b({scopedSlots:e._u([{key:"prefix",fn:function(){return[e._t("prefix")]},proxy:!0},{key:"empty",fn:function(){return[e._t("empty")]},proxy:!0}],null,!0)},"q-select",e.$attrs,!1),e.$listeners),e._l(e.options,(function(t){return n("q-option",{key:t[e.config.value],attrs:{label:t[e.config.label],value:t[e.config.value],disabled:t[e.config.disabled]}},[e._t("option",null,null,t)],2)})),1)},z=[];const K={name:"CustomSelect",inheritAttrs:!1};K.props={options:{type:Array,default:()=>[]},config:{type:Object,default:()=>({value:"value",label:"label",disabled:"disabled"})}};var W=K,U=W,J=(0,l.A)(U,B,z,!1,null,null,null),H=J.exports,Y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e._v(e._s(e.value))])},G=[];const Q={name:"CustomString",inheritAttrs:!1};Q.props={value:{type:String,default:""}};var Z=Q,X=Z,ee=(0,l.A)(X,Y,G,!1,null,null,null),te=ee.exports,ne={name:"DynamicComponent",components:{CustomSelect:H,CustomString:te},props:{name:{type:String,required:!0}}},re=ne,oe=(0,l.A)(re,j,V,!1,null,null,null),ae=oe.exports,se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._t("default")],2)},ie=[],le=n(7350),ue=n.n(le),ce={name:"VirtualScrollTable",props:{data:{type:Array,required:!0},height:{type:Number,default:60},buffer:{type:Number,default:500},keyProp:{type:String,default:"id"},throttleTime:{type:Number,default:100}},data(){return{sizes:{}}},computed:{offsetMap({keyProp:e,height:t,sizes:n,data:r}){const o={};let a=0;for(let s=0;s<r.length;s++){const i=r[s][e];o[i]=a;const l=n[i],u="number"===typeof l?l:t;a+=u}return o}},watch:{data(){this.update()}},created(){this.$nextTick((()=>{this.initData()}))},beforeDestroy(){this.scroller&&(this.scroller.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onScroll))},methods:{initData(){this.renderData=[],this.top=void 0,this.bottom=void 0,this.start=0,this.end=void 0,this.scroller=this.$el.querySelector(".q-table__body-wrapper"),setTimeout((()=>{this.handleScroll()}),100),this.onScroll=ue()(this.handleScroll,this.throttleTime),this.scroller.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.onScroll)},updateSizes(){const e=this.$el.querySelectorAll(".q-table__body > tbody > .q-table__row");Array.from(e).forEach(((e,t)=>{const n=this.renderData[t];if(!n)return;const r=n[this.keyProp],o=e.offsetHeight;this.sizes[r]!==o&&this.$set(this.sizes,r,o)}))},handleScroll(e=!0){this.updateSizes(),this.calcRenderData(),this.calcPosition(),e&&this.updatePosition(),this.$emit("change",this.renderData,this.start,this.end)},getOffsetTop(e){const t=this.data[e];return t&&this.offsetMap[t[this.keyProp]]||0},getSize(e){const t=this.data[e];if(t){const e=t[this.keyProp];return this.sizes[e]||this.height}return this.height},calcRenderData(){const{scroller:e,data:t,buffer:n}=this,r=e.scrollTop-n,o=e.scrollTop+e.offsetHeight+n;let a=0,s=t.length-1,i=0;while(a<=s){i=Math.floor((a+s)/2);const e=this.getOffsetTop(i);if(e<r){const e=this.getOffsetTop(i+1);if(e>r)break;a=i+1}else s=i-1}let l=i,u=t.length-1;for(let c=l+1;c<t.length;c++){const e=this.getOffsetTop(c);if(e>=o){u=c;break}}l%2&&(l-=1),this.top=r,this.bottom=o,this.start=l,this.end=u,this.renderData=t.slice(l,u+1),console.log("renderData",this.renderData)},calcPosition(){const e=this.data.length-1,t=this.getOffsetTop(e)+this.getSize(e),n=this.getOffsetTop(this.start),r=[".q-table__body-wrapper",".q-table__fixed-right .q-table__fixed-body-wrapper",".q-table__fixed .q-table__fixed-body-wrapper"];r.forEach((e=>{const r=this.$el.querySelector(e);if(r){if(!r.wrapEl){const e=document.createElement("div"),t=document.createElement("div");e.appendChild(t),t.appendChild(r.children[0]),r.insertBefore(e,r.firstChild),r.wrapEl=e,r.innerEl=t}r.wrapEl&&(r.wrapEl.style.height=t+"px",r.innerEl.style.transform=`translateY(${n}px)`)}}))},updatePosition(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{this.timer&&clearTimeout(this.timer),this.handleScroll(!1)}),this.throttleTime+10)},update(){console.log("update"),this.handleScroll()},scrollTo(e,t=!1){const n=this.data[e];n&&this.scroller&&(this.updateSizes(),this.calcRenderData(),this.$nextTick((()=>{const n=this.getOffsetTop(e);this.scroller.scrollTop=n,t||setTimeout((()=>{this.scrollTo(e,!0)}),50)})))},reset(){this.sizes={},this.scrollTo(0,!1)}}},pe=ce,de=(0,l.A)(pe,se,ie,!1,null,null,null),fe=de.exports,he=n(2543),me={name:"DynamicTable",components:{DynamicComponent:ae,CustomSelect:H,CustomString:te,VirtualScrollTable:fe},props:{dataIds:{type:Array,default:()=>[]},tableHeadData:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!0},isCustomRow:{type:Boolean,default:!0}},data(){return{formData:{tableData:[]},form:{virtualList:[]}}},computed:{newRow(){const e={};return this.tableHeadData.forEach((t=>{console.log(t,"item"),e[t.prop]=t.componentProps?.multiple?[]:""})),e},addDisabled(){return!this.isCustomRow||this.disabled}},methods:{handleAdd(){this.formData.tableData.push({...this.newRow,_index:this.formData.tableData.length})},handleDelete(e){const t=this.formData.tableData.findIndex((t=>t._index===e));this.formData.tableData.splice(t,1)},getValues(){const e=(0,he.cloneDeep)(this.formData.tableData);return e.forEach(((e,t)=>{this.dataIds.forEach((n=>{e[n]=t+1}))})),e},setValues(e){this.formData.tableData=e},async validate(){return await this.$refs.formRef.validate()}}},ve=me,be=(0,l.A)(ve,$,F,!1,null,"57cb8560",null),ye=be.exports,ge=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-input",{attrs:{type:"textarea",rows:12,placeholder:"仅支持JSON格式",disabled:e.disabled},model:{value:e.json,callback:function(t){e.json=t},expression:"json"}})},_e=[];const we={};we.props={dataIds:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},we.setup=(e,t)=>{const n=e,r=(0,a.KR)(""),o=()=>{let e;try{e=JSON.parse(r.value)}catch(t){return console.log(t),!1}return"object"===typeof e},s=()=>{const e=JSON.parse(r.value);return Array.isArray(e)&&e.forEach(((e,t)=>{n.dataIds.forEach((n=>{e[n]=t+1}))})),e},i=e=>{r.value=JSON.stringify(e,null,2)};return Object.assign({json:r},{setValues:i,getValues:s,validate:o})};var Se=we,Ee=Se,xe=(0,l.A)(Ee,ge,_e,!1,null,null,null),De=xe.exports;const Ce={name:"EventSetter"};Ce.props={value:{type:String,default:""},dataDrilling:{type:Boolean,default:!0},mockDrilling:{type:Boolean,default:!0},onChange:{type:Function,default:()=>{}}},Ce.setup=(e,t)=>{const n=e,r=(0,a.KR)(JSON.parse(n.value)),{proxy:o}=(0,a.nI)(),s=(0,a.KR)(!1),i=(0,a.KR)("table"),l=(0,a.KR)([{label:"运营中心",prop:"center",type:"text",required:!0,component:"CustomSelect",componentProps:{options:[{label:"运营中心一",value:"1"},{label:"运营中心二",value:"2"}]}},{label:"运营中心区域",prop:"centerArea",required:!0,component:"CustomString",componentProps:{value:""}},{label:"运营单位",prop:"company",type:"text",required:!0,component:"CustomSelect",componentProps:{options:[{label:"运营单位一",value:"1"},{label:"运营单位二",value:"2"}]}},{label:"运营单位区域",prop:"companyArea",required:!0,component:"CustomString",componentProps:{value:""}}]),u=(0,a.KR)([]),c=(0,a.KR)(!0),p=(0,a.KR)(!0),d=(0,a.KR)(null),f=(0,a.KR)(null),h=async(e,t)=>{if("table"===e&&"json"===t){const e=f.value.validate();if(!e)return o.$message.error("JSON格式不正确，无法转换为可视数据!"),!1;const t=f.value.getValues();p.value=!1,await(0,a.dY)(),p.value=!0,await(0,a.dY)(),d.value.setValues(t)}else if("json"===e&&"table"===t){const e=d.value.getValues();f.value.setValues(e)}return!0},m=async()=>{s.value=!0,await(0,a.dY)(),d.value.setValues(r.value)},v=()=>{const e=d.value.getValues(),t=JSON.stringify(e,null,2);n.onChange(t),s.value=!1};return{drawer:s,activeMode:i,tableHeadData:l,tableDataIds:u,isCustomRow:c,activeTableTab:p,dynamicTableRef:d,jsonEditorRef:f,onBeforeTabLeave:h,handleDrawer:m,handleSave:v}},Ce.components=Object.assign({DynamicTable:ye,JsonEditor:De},Ce.components);var ke=Ce,Ae=ke,qe=(0,l.A)(Ae,L,P,!1,null,"4fde349c",null),Ne=qe.exports,Te=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"edit-mock-setter"},[n("div",{staticClass:"edit-btn"},[n("q-button",{attrs:{type:"text"},on:{click:e.handleDrawer}},[e._v(" 编辑静态数据 ")]),n("q-tooltip",[n("div",{attrs:{slot:"content"},slot:"content"},[e._v(" 动态数据："+e._s(e.dataDrilling?"支持":"不支持")+"下钻 "),n("br"),e._v(" 静态数据："+e._s(e.mockDrilling?"支持":"不支持")+"下钻 ")]),n("i",{staticClass:"qax-icon-Question-outline tooltip-icon"})])],1),n("q-drawer",{attrs:{title:"编辑静态数据",size:"800px",wrapperClosable:!1,visible:e.drawer},on:{"update:visible":function(t){e.drawer=t}}},[n("q-tabs",{attrs:{type:"card","before-leave":e.onBeforeTabLeave},model:{value:e.activeMode,callback:function(t){e.activeMode=t},expression:"activeMode"}},[n("q-tab-pane",{attrs:{label:"可视模式",name:"table"}},[e.activeTableTab?n("DynamicTable",{ref:"dynamicTableRef",attrs:{"table-head-data":e.tableHeadData,"data-ids":e.tableDataIds,"is-custom-row":e.isCustomRow,disabled:!1}}):e._e()],1),n("q-tab-pane",{attrs:{label:"Json模式",name:"json"}},[n("JsonEditor",{ref:"jsonEditorRef",attrs:{"data-ids":e.tableDataIds}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("q-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("确定")])],1)],1)],1)},Re=[],Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dynamic-table"},[n("div",{staticClass:"add-btn"},[n("q-button",{attrs:{disabled:e.addDisabled,type:"primary",icon:"qax-icon-Alone-Plus"},on:{click:e.handleAdd}},[e._v(" 增加一组 ")])],1),n("div",{staticClass:"content"},e._l(e.formData.tableData,(function(t,r){return n("div",{key:r,staticClass:"group-list"},[n("div",{staticClass:"group-tool"},[n("div",{staticClass:"group-name"},[e._v(" 组"+e._s(r+1)+" "),n("q-select",{attrs:{placeholder:"请选择运营中心",clearable:""},on:{change:function(t){return e.changeGroup(t,r)}},model:{value:t.centerId,callback:function(n){e.$set(t,"centerId",n)},expression:"groupItem.centerId"}},e._l(e.centerList,(function(e){return n("q-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1),n("q-button",{staticClass:"delete",attrs:{icon:"qax-icon-Trash",type:"text",title:"删除",danger:""},on:{click:function(t){return e.handleDelete(r)}}})],1),n("q-table",{ref:"tableRef",refInFor:!0,staticClass:"edit-table w-full mt-8",attrs:{data:t.list}},e._l(e.tableHeadData,(function(t){return n("q-table-column",e._b({key:t.prop,scopedSlots:e._u([{key:"default",fn:function(r){var o=r.row;return[n(t.component,e._b({tag:"component",model:{value:o[t.prop],callback:function(n){e.$set(o,t.prop,n)},expression:"row[item.prop]"}},"component",t.componentProps,!1))]}}],null,!0)},"q-table-column",t,!1))})),1)],1)})),0)])},Ie=[],Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-select",e._g(e._b({scopedSlots:e._u([{key:"prefix",fn:function(){return[e._t("prefix")]},proxy:!0},{key:"empty",fn:function(){return[e._t("empty")]},proxy:!0}],null,!0)},"q-select",e.$attrs,!1),e.$listeners),e._l(e.options,(function(t){return n("q-option",{key:t[e.config.value],attrs:{label:t[e.config.label],value:t[e.config.value],disabled:t[e.config.disabled]}},[e._t("option",null,null,t)],2)})),1)},Le=[];const Pe={name:"CustomSelect",inheritAttrs:!1};Pe.props={options:{type:Array,default:()=>[]},config:{type:Object,default:()=>({value:"value",label:"label",disabled:"disabled"})}};var $e=Pe,Fe=$e,je=(0,l.A)(Fe,Me,Le,!1,null,null,null),Ve=je.exports,Be=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",[e._v(e._s(e.value)),n("span",[e._v(e._s("48"===e.value?"小时":"天"))])])},ze=[];const Ke={name:"CustomString",inheritAttrs:!1};Ke.props={value:{type:String,default:""}};var We=Ke,Ue=We,Je=(0,l.A)(Ue,Be,ze,!1,null,null,null),He=Je.exports,Ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-input",e._g(e._b({},"q-input",e.$attrs,!1),e.$listeners))},Ge=[];const Qe={name:"CustomInput",inheritAttrs:!1};Qe.props={options:{type:Array,default:()=>[]},config:{type:Object,default:()=>({value:"value",label:"label",disabled:"disabled"})}};var Ze=Qe,Xe=Ze,et=(0,l.A)(Xe,Ye,Ge,!1,null,null,null),tt=et.exports,nt={name:"DynamicTable",components:{CustomSelect:Ve,CustomString:He,CustomInput:tt},props:{dataIds:{type:Array,default:()=>[]},tableHeadData:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!0},isCustomRow:{type:Boolean,default:!0}},data(){return{formData:{tableData:[]},form:{virtualList:[]},centerList:[{label:"运营中心1",value:"1"},{label:"运营中心2",value:"2"},{label:"运营中心3",value:"3"}]}},computed:{newRow(){const e={};return this.tableHeadData.forEach((t=>{e[t.prop]=t.componentProps?.multiple?[]:""})),e},addDisabled(){return!this.isCustomRow||this.disabled}},methods:{setPeriodList(e,t){return Array.from({length:e},(()=>({...this.newRow,period:t})))},handleAdd(){const e=this.setPeriodList(6,"48"),t=this.setPeriodList(7,"7"),n=this.setPeriodList(30,"30"),r=this.setPeriodList(90,"90"),o={centerId:"",list:[...e,...t,...n,...r],_index:this.formData.tableData.length};this.formData.tableData.push(o)},handleDelete(e){const t=this.formData.tableData.findIndex((t=>t._index===e));this.formData.tableData.splice(t,1)},getValues(){const e=(0,he.cloneDeep)(this.formData.tableData);return e.forEach(((e,t)=>{this.dataIds.forEach((n=>{e[n]=t+1}))})),e},setValues(e){this.formData.tableData=e,this.changeGroup()},async validate(){return await this.$refs.formRef.validate()},changeGroup(){this.centerList=this.centerList.map((e=>({...e,disabled:this.formData.tableData?.some((t=>t.centerId===e.value))})))}}},rt=nt,ot=(0,l.A)(rt,Oe,Ie,!1,null,"5023a4a0",null),at=ot.exports,st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-input",{attrs:{type:"textarea",rows:12,placeholder:"仅支持JSON格式",disabled:e.disabled},model:{value:e.json,callback:function(t){e.json=t},expression:"json"}})},it=[];const lt={};lt.props={dataIds:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},lt.setup=(e,t)=>{const n=e,r=(0,a.KR)(""),o=()=>{let e;try{e=JSON.parse(r.value)}catch(t){return console.log(t),!1}return"object"===typeof e},s=()=>{const e=JSON.parse(r.value);return Array.isArray(e)&&e.forEach(((e,t)=>{n.dataIds.forEach((n=>{e[n]=t+1}))})),e},i=e=>{r.value=JSON.stringify(e,null,2)};return Object.assign({json:r},{setValues:i,getValues:s,validate:o})};var ut=lt,ct=ut,pt=(0,l.A)(ct,st,it,!1,null,"583801e2",null),dt=pt.exports;const ft={name:"EventSetter"};ft.props={value:{type:String,default:""},dataDrilling:{type:Boolean,default:!0},mockDrilling:{type:Boolean,default:!0},onChange:{type:Function,default:()=>{}}},ft.setup=(e,t)=>{const n=e,r=(0,a.KR)(JSON.parse(n.value)),{proxy:o}=(0,a.nI)(),s=(0,a.KR)(!1),i=(0,a.KR)("table"),l=(0,a.KR)([{label:"时间周期",prop:"period",component:"CustomString"},{label:"攻击者IP",prop:"ip",required:!0,component:"CustomInput"},{label:"攻击者国家",prop:"country",required:!0,component:"CustomInput"},{label:"攻击次数",prop:"attackNum",required:!0,component:"CustomInput",componentProps:{type:"number"}}]),u=(0,a.KR)([]),c=(0,a.KR)(!0),p=(0,a.KR)(!0),d=(0,a.KR)(null),f=(0,a.KR)(null),h=async(e,t)=>{if("table"===e&&"json"===t){const e=f.value.validate();if(!e)return o.$message.error("JSON格式不正确，无法转换为可视数据!"),!1;const t=f.value.getValues();p.value=!1,await(0,a.dY)(),p.value=!0,await(0,a.dY)(),d.value.setValues(t)}else if("json"===e&&"table"===t){const e=d.value.getValues();f.value.setValues(e)}return!0},m=async()=>{s.value=!0,await(0,a.dY)(),d.value.setValues(r.value)},v=()=>{const e=d.value.getValues(),t=JSON.stringify(e,null,2);n.onChange(t),s.value=!1};return{drawer:s,activeMode:i,tableHeadData:l,tableDataIds:u,isCustomRow:c,activeTableTab:p,dynamicTableRef:d,jsonEditorRef:f,onBeforeTabLeave:h,handleDrawer:m,handleSave:v}},ft.components=Object.assign({DynamicTable:at,JsonEditor:dt},ft.components);var ht=ft,mt=ht,vt=(0,l.A)(mt,Te,Re,!1,null,"ef8c0dc0",null),bt=vt.exports,yt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"field-setter"},[e._l(e._value,(function(t,r){return n("div",{key:t.field,staticClass:"field-list"},[n("q-select",{attrs:{placeholder:"脱敏字段"},on:{change:e.changeSelect},model:{value:t.fieldId,callback:function(n){e.$set(t,"fieldId",n)},expression:"item.fieldId"}},e._l(e.fields,(function(e){return n("q-option",{key:e.id,attrs:{label:e.label,value:e.id,disabled:e.disabled}})})),1),n("div",{staticClass:"rule"}),n("q-select",{attrs:{placeholder:"脱敏规则"},model:{value:t.ruleId,callback:function(n){e.$set(t,"ruleId",n)},expression:"item.ruleId"}},e._l(e.rules,(function(e){return n("q-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1),n("q-button",{staticClass:"delete",attrs:{type:"text",title:"删除",danger:""},on:{click:function(t){return e.handleDeleteRow(r)}}},[n("i",{staticClass:"q-icon-delete"})])],1)})),n("q-button",{staticClass:"add-style",attrs:{type:"text"},on:{click:e.handleAddRow}},[e._v(" 添加 ")])],2)},gt=[],_t=(0,a.pM)({name:"DesensitizationFieldSetter",props:{value:{type:Array,default:()=>[]},onChange:{type:Function,default:()=>{}}},setup(e){const t=(0,a.KR)([{id:"1",label:"字段1"},{id:"2",label:"字段2"}]),n=[{id:"1",label:"规则1"},{id:"2",label:"规则2"}],r=e.value,o=()=>{r.push({fieldId:"",ruleId:""}),e.onChange(r)},s=t=>{r.splice(t,1),e.onChange(r)},i=()=>{t.value=t.value.map((e=>({...e,disabled:r?.some((t=>t.fieldId===e.id))})))};return i(),{fields:t,rules:n,_value:r,handleAddRow:o,handleDeleteRow:s,changeSelect:i}}}),wt=_t,St=(0,l.A)(wt,yt,gt,!1,null,"565d8f00",null),Et=St.exports,xt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"checkbox-setter"},[n("q-checkbox-group",{model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}},e._l(e.options,(function(t,r){return n("q-checkbox",{key:r,attrs:{label:t.value}},[e._v(e._s(t.label)+" ")])})),1)],1)},Dt=[],Ct=(0,a.pM)({name:"CheckboxSetter",props:{value:{type:Array,default:()=>[]},options:{type:Array,default:()=>[]},onChange:{type:Function,default:()=>{}}},setup(e){return{_value:(0,a.EW)({get:()=>e.value,set:t=>e.onChange(t)})}}}),kt=Ct,At=(0,l.A)(kt,xt,Dt,!1,null,"711031e0",null),qt=At.exports,Nt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"upload-setter"},[r("img",{staticClass:"upload-img",attrs:{src:n(2860)("./"+e.value+".png"),alt:""}})])},Tt=[],Rt=(0,a.pM)({name:"UploadSetter",props:{value:{type:String,default:""},onChange:{type:Function,default:()=>{}}},setup(){const e=e=>{};return{handleVariable:e}}}),Ot=Rt,It=(0,l.A)(Ot,Nt,Tt,!1,null,"068715e8",null),Mt=It.exports,Lt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-cascader",{attrs:{props:e.propsOption,options:e.options,filterable:"",clearable:""},model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}})},Pt=[],$t=(0,a.pM)({name:"RegionSetter",props:{value:{type:Number,default:null},onChange:{type:Function,default:()=>{}},options:{type:Array,default:()=>[]}},setup(e){const t={label:"name",value:"id",checkStrictly:!0};return{_value:(0,a.EW)({get:()=>e.value,set:t=>e.onChange(t)}),propsOption:t}}}),Ft=$t,jt=(0,l.A)(Ft,Lt,Pt,!1,null,null,null),Vt=jt.exports,Bt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-setter"},e._l(e.options,(function(t,r){return n("span",{key:r},[e._v(" "+e._s(t))])})),0)},zt=[],Kt=(0,a.pM)({name:"ListSetter",props:{options:{type:Array,default:()=>[]}}}),Wt=Kt,Ut=(0,l.A)(Wt,Bt,zt,!1,null,"314b2234",null),Jt=Ut.exports,Ht={StringSetter:c,InputSetter:b,NumberSetter:E,BooleanSetter:q,SelectSetter:M,EditMockSetter:Ne,EditGroupMockSetter:bt,DesensitizationFieldSetter:Et,CheckboxSetter:qt,UploadSetter:Mt,RegionSetter:Vt,ListSetter:Jt}},8642:function(e,t,n){"use strict";n.d(t,{k:function(){return m},A:function(){return v}});var r=n(5471),o=n(5738),a=n(550),s=n(2543);class i{id;props;componentName;componentMeta;type;constructor(e){this.id=e.id||`screen_${(0,a.Ld)()}`,this.props=e.props||this.meta2Props(e.componentMeta),this.componentName=e.componentName,this.componentMeta=e.componentMeta,this.type=e.type}get propsMeta(){return(0,s.get)(this.componentMeta,"props",[])}meta2Props(e){const t={},{props:n}=e;return n.forEach((e=>{t[e.name]=(0,s.cloneDeep)(e.defaultValue)})),t}validator(){for(const e of this.propsMeta){if("string"===(0,s.get)(e,"rules.type")&&e.rules.required&&(0,s.isEmpty)(this.props?.[e.name]))return void new Error(`${e.desc}不能为空`);if("array"===(0,s.get)(e,"rules.type")&&e.rules.required){const t=this.props?.[e.name];if((0,s.isEmpty)(t))return void new Error(`${e.desc}不能为空`)}}return!0}generateValidateRules(){const e={};for(const t of this.propsMeta){if("string"===(0,s.get)(t,"rules.type")&&t.rules.required){const n=(e,n,r)=>{(0,s.isEmpty)(this.props?.[t.name])?r(new Error(`${t.desc}不能为空`)):r()};e[t.name]=[{required:!0,validator:n,trigger:"blur"}]}if("array"===(0,s.get)(t,"rules.type")&&t.rules.required){const n=(e,n,r)=>{(0,s.isEmpty)(n)?r(new Error(`${t.desc}不能为空`)):r()};e[t.name]=[{required:!0,validator:n,message:`${t.desc}不能为空`,trigger:"blur"}]}}return e}getSchema(){return{id:this.id,type:this.type,componentName:this.componentName,props:this.props||{}}}}class l{id;props;componentName;componentMeta;type;constructor(e){this.id=e.id||`map_${(0,a.Ld)()}`,this.props=e.props||this.meta2Props(e.componentMeta),this.componentName=e.componentName,this.componentMeta=e.componentMeta,this.type=e.type}get propsMeta(){return(0,s.get)(this.componentMeta,"props",[])}meta2Props(e){const t={},{props:n}=e;return n.forEach((e=>{t[e.name]=(0,s.cloneDeep)(e.defaultValue)})),t}validator(){for(const e of this.propsMeta){if("string"===(0,s.get)(e,"rules.type")&&e.rules.required&&(0,s.isEmpty)(this.props?.[e.name]))return void new Error(`${e.desc}不能为空`);if("array"===(0,s.get)(e,"rules.type")&&e.rules.required){const t=this.props?.[e.name];if((0,s.isEmpty)(t))return void new Error(`${e.desc}不能为空`)}}return!0}generateValidateRules(){const e={};for(const t of this.propsMeta){if("string"===(0,s.get)(t,"rules.type")&&t.rules.required){const n=(e,n,r)=>{(0,s.isEmpty)(this.props?.[t.name])?r(new Error(`${t.desc}不能为空`)):r()};e[t.name]=[{required:!0,validator:n,trigger:"blur"}]}if("array"===(0,s.get)(t,"rules.type")&&t.rules.required){const n=(e,n,r)=>{(0,s.isEmpty)(n)?r(new Error(`${t.desc}不能为空`)):r()};e[t.name]=[{required:!0,validator:n,message:`${t.desc}不能为空`,trigger:"blur"}]}}return e}getSchema(){return{id:this.id,type:this.type,componentName:this.componentName,props:this.props||{}}}}var u=n(8495);class c{engine;screen;map;nodes;operateNodes;schema;selection;constructor(e){this.engine=e,this.screen=(0,o.KR)(null),this.map=(0,o.KR)(null),this.nodes=(0,o.KR)([]),this.operateNodes=(0,o.KR)([]),this.schema=(0,o.KR)(null),this.selection=(0,o.KR)(null)}get activeNode(){return this.selection}init(){}addNode(e,t){t?this.operateNodes.value.push(e):this.nodes.value.push(e)}setMapProps(e,t){this.map.value&&this.map.value.props&&(this.map.value.props[e]=t)}setScreenProps(e,t){this.screen.value&&this.screen.value.props&&(this.screen.value.props[e]=t)}setSelection(e){this.selection.value=e}deleteNode(e,t){t?this.operateNodes.value=this.operateNodes.value.filter((t=>t.id!==e))??[]:this.nodes.value=this.nodes.value.filter((t=>t.id!==e))??[],this.selection.value=null}deleteAllNode(){this.nodes.value=[]}deleteAllOperateNode(){this.operateNodes.value=[]}mergeNodeInfo(e,t,n){n?this.operateNodes.value=this.operateNodes.value.map((n=>(n.id===e&&(n.x=t.x,n.y=t.y),n))):this.nodes.value=this.nodes.value.map((n=>(n.id===e&&(n.x=t.x,n.y=t.y),n)))}setSchema(e){const{screen:t,map:n,nodes:r=[],operateNodes:o=[]}=e;this.nodes.value=[];const a=this.engine.workbench.assets,s=Object.values(a.components);this.nodes.value=r.map((e=>{const t=s.find((t=>t.componentName===e.componentName)),n=new u.b({...t,...e});return n})),this.operateNodes.value=o.map((e=>{const t=s.find((t=>t.componentName===e.componentName)),n=new u.b({...t,...e});return n}));const c=s.find((e=>e.componentName===n.componentName));this.map.value=new l({...c,...n});const p=s.find((e=>e.componentName===t.componentName));this.screen.value=new i({...p,...t})}getSchema(){const e={screen:this.screen.value?.getSchema(),map:this.map.value?.getSchema(),nodes:this.nodes.value.map((e=>e.getSchema())),operateNodes:this.operateNodes.value.map((e=>e.getSchema()))};return e}async onChangeSelection(e){this.selection.value=e}validateNodes(e){let t=null;const n=e=>!!e.validator()||(t=e,!1),r=e?e.validator():this.nodes.value.every(n);return{validateStatus:r,errorNode:t}}}class p{engine;assets;setters;settersFormInstance=null;constructor(e){this.engine=e,this.assets={components:{},menu:[]},this.setters={}}updateAssets(e){this.assets=(0,s.cloneDeep)(e)}updateSetters(e){this.setters=(0,s.cloneDeep)(e)}validateSettersForm(){return this.settersFormInstance?this.settersFormInstance.validate():Promise.resolve(!0)}}class d{engine;constructor(e){this.engine=e}}class f{engine;constructor(e){this.engine=e}cloneComponent(e){const t=new u.b(e);return t}}class h{document;workbench;viewport;dragon;constructor({assets:e,setters:t}){this.document=new c(this),this.workbench=new p(this),this.viewport=new d(this),this.dragon=new f(this),this.register(e,t),this.initDocument()}initDocument(){this.document.init()}register(e,t){this.registerAssets(e),this.registerSetters(t)}registerAssets(e){if(!e)return;const{components:t}=e;Object.keys(t).forEach((e=>{const n=t[e];r.A.component(n.componentName,n.component)})),this.workbench.updateAssets(e)}registerSetters(e){Object.keys(e).forEach((t=>{r.A.component(t,e[t])})),this.workbench.updateSetters(e)}}const m=Symbol("Engine");function v(e){return new h(e)}}}]);
//# sourceMappingURL=285.434fc25b.js.map