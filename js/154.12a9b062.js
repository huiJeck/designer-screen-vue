(self["webpackChunkvue2_composition_api"]=self["webpackChunkvue2_composition_api"]||[]).push([[154],{550:function(e,t,n){"use strict";n.d(t,{Ld:function(){return E}});var r=function(e){return function(t){return null!=t&&(Array.isArray(e)?e:[e]).some((function(e){return o(t)==="[object "+e+"]"}))}},o=function(e){return Object.prototype.toString.call(e)},i=r(["Function","AsyncFunction","GeneratorFunction"]),a=r("Window"),s=Array.isArray,l=(r("Object"),r("String"),r("Boolean"),r("Number"),r("RegExp"),Symbol("UNSUBSCRIBE_ID_SYMBOL")),u=function(){function e(){var e=this;this.subscribers={index:0},this.unsubscribe=function(t){if(void 0!==t&&null!==t)i(t)?delete e.subscribers[t[l]]:delete e.subscribers[t];else for(var n in e.subscribers)e.unsubscribe(n)}}return e.prototype.dispatch=function(e,t){var n=!1;for(var r in this.subscribers)i(this.subscribers[r])&&(e["context"]=t,!1===this.subscribers[r](e)&&(n=!0));return!n},e.prototype.subscribe=function(e){var t,n=this;i(e)&&(t=this.subscribers.index+1,this.subscribers[t]=e,this.subscribers.index++);var r=function(){n.unsubscribe(t)};return r[l]=t,r},e}();function c(){try{if("undefined"!==typeof self)return self}catch(e){}try{if("undefined"!==typeof d)return d}catch(e){}try{if("undefined"!==typeof n.g)return n.g}catch(e){}return Function("return this")()}var p,d=c(),f=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=Symbol("ATTACHED_SYMBOL"),v=Symbol("__EVENTS_SYMBOL__"),m=Symbol("EVENTS_ONCE_SYMBOL"),y=Symbol("EVENTS_BATCH_SYMBOL"),b=Symbol("DRIVER_INSTANCES_SYMBOL"),g=function(e){return"onlyOne"===e||"onlyChild"===e||"onlyParent"===e};(function(){function e(e,t){this.container=document,this.contentWindow=d,this.engine=e,this.context=t}e.prototype.dispatch=function(e){return this.engine.dispatch(e,this.context)},e.prototype.subscribe=function(e){return this.engine.subscribe(e)},e.prototype.subscribeTo=function(e,t){return this.engine.subscribeTo(e,t)},e.prototype.subscribeWith=function(e,t){return this.engine.subscribeWith(e,t)},e.prototype.attach=function(e){console.error("attach must implement.")},e.prototype.detach=function(e){console.error("attach must implement.")},e.prototype.eventTarget=function(e){var t;return"resize"!==e&&"scroll"!==e||this.container!==(null===(t=this.contentWindow)||void 0===t?void 0:t.document)?this.container:this.contentWindow},e.prototype.addEventListener=function(e,t,n){var r,o,i,a,s=this.eventTarget(e);if(g(null===n||void 0===n?void 0:n.mode)){s[m]=s[m]||{};var l=this["constructor"];l[m]=l[m]||{};var u=s[m][e],c=l[m][e];if(!u){if(c)if("onlyChild"===n.mode)c.contains(s)&&(c.removeEventListener(e,c[m][e],n),delete c[m][e]);else if("onlyParent"===n.mode&&c.contains(s))return;s.addEventListener(e,t,n),s[m][e]=t,l[m][e]=s}}else s[v]=s[v]||{},s[v][e]=s[v][e]||new Map,(null===(o=null===(r=s[v][e])||void 0===r?void 0:r.get)||void 0===o?void 0:o.call(r,t))||(s.addEventListener(e,t,n),null===(a=null===(i=s[v][e])||void 0===i?void 0:i.set)||void 0===a||a.call(i,t,!0))},e.prototype.removeEventListener=function(e,t,n){var r,o,i=this.eventTarget(e);if(g(null===n||void 0===n?void 0:n.mode)){var a=this["constructor"];a[m]=a[m]||{},i[m]=i[m]||{},delete a[m][e],delete i[m][e],i.removeEventListener(e,t,n)}else i[v]=i[v]||{},i[v][e]=i[v][e]||new Map,null===(o=null===(r=i[v][e])||void 0===r?void 0:r.delete)||void 0===o||o.call(r,t),i.removeEventListener(e,t,n)},e.prototype.batchAddEventListener=function(e,t,n){this.engine[b]=this.engine[b]||[],this.engine[b].includes(this)||this.engine[b].push(this),this.engine[b].forEach((function(r){var o=r.eventTarget(e);o[y]=o[y]||{},o[y][e]||(o.addEventListener(e,t,n),o[y][e]=t)}))},e.prototype.batchRemoveEventListener=function(e,t,n){this.engine[b]=this.engine[b]||[],this.engine[b].forEach((function(r){var o=r.eventTarget(e);o[y]=o[y]||{},o.removeEventListener(e,t,n),delete o[y][e]}))}})(),function(e){function t(t){var n=e.call(this)||this;return n.drivers=[],n.containers=[],s(null===t||void 0===t?void 0:t.effects)&&t.effects.forEach((function(e){e(n)})),s(null===t||void 0===t?void 0:t.drivers)&&(n.drivers=t.drivers),n}f(t,e),t.prototype.subscribeTo=function(e,t){return this.subscribe((function(n){if(e&&n instanceof e)return t(n)}))},t.prototype.subscribeWith=function(e,t){return this.subscribe((function(n){if(s(e)){if(e.includes(null===n||void 0===n?void 0:n.type))return t(n)}else if(e&&(null===n||void 0===n?void 0:n.type)===e)return t(n)}))},t.prototype.attachEvents=function(e,t,n){var r=this;if(void 0===t&&(t=d),e)return a(e)?this.attachEvents(e.document,e,n):void(e[h]||(e[h]=this.drivers.map((function(o){var i=new o(r,n);return i.contentWindow=t,i.container=e,i.attach(e),i})),this.containers.includes(e)||this.containers.push(e)))},t.prototype.detachEvents=function(e){var t=this;if(e)return a(e)?this.detachEvents(e.document):void(e[h]&&(e[h].forEach((function(t){t.detach(e)})),this[b]=this[b]||[],this[b]=this[b].reduce((function(t,n){return n.container===e?(n.detach(e),t):t.concat(n)}),[]),this.containers=this.containers.filter((function(t){return t!==e})),delete e[h],delete e[v],delete e[m],delete e[y]));this.containers.forEach((function(e){t.detachEvents(e)}))}}(u),function(){function e(e,t){this.x=e,this.y=t}}();(function(e){e["Inner1"]="I1",e["Inner2"]="I2",e["Inner3"]="I3",e["Inner4"]="I4",e["Outer1"]="O1",e["Outer2"]="O2",e["Outer3"]="O3",e["Outer4"]="O4"})(p||(p={}));var w=36,S="";while(w--)S+=w.toString(36);function E(e){var t="",n=e||11;while(n--)t+=S[36*Math.random()|0];return t}var _=Symbol("newer"),x=Symbol("older");function k(e,t){this.key=e,this.value=t,this[_]=void 0,this[x]=void 0}(function(){function e(e,t){"number"!==typeof e&&(t=e,e=0),this.size=0,this.limit=e,this.oldest=this.newest=void 0,this._keymap=new Map,t&&(this.assign(t),e<1&&(this.limit=this.size))}e.prototype._markEntryAsUsed=function(e){e!==this.newest&&(e[_]&&(e===this.oldest&&(this.oldest=e[_]),e[_][x]=e[x]),e[x]&&(e[x][_]=e[_]),e[_]=void 0,e[x]=this.newest,this.newest&&(this.newest[_]=e),this.newest=e)},e.prototype.assign=function(e){var t,n=this.limit||Number.MAX_VALUE;this._keymap.clear();for(var r=e[Symbol.iterator](),o=r.next();!o.done;o=r.next()){var i=new k(o.value[0],o.value[1]);if(this._keymap.set(i.key,i),t?(t[_]=i,i[x]=t):this.oldest=i,t=i,0===n--)throw new Error("overflow")}this.newest=t,this.size=this._keymap.size},e.prototype.get=function(e){var t=this._keymap.get(e);if(t)return this._markEntryAsUsed(t),t.value},e.prototype.set=function(e,t){var n=this._keymap.get(e);return n?(n.value=t,this._markEntryAsUsed(n),this):(this._keymap.set(e,n=new k(e,t)),this.newest?(this.newest[_]=n,n[x]=this.newest):this.oldest=n,this.newest=n,++this.size,this.size>this.limit&&this.shift(),this)},e.prototype.shift=function(){var e=this.oldest;if(e)return this.oldest[_]?(this.oldest=this.oldest[_],this.oldest[x]=void 0):(this.oldest=void 0,this.newest=void 0),e[_]=e[x]=void 0,this._keymap.delete(e.key),--this.size,[e.key,e.value]},e.prototype.find=function(e){var t=this._keymap.get(e);return t?t.value:void 0},e.prototype.has=function(e){return this._keymap.has(e)},e.prototype.delete=function(e){var t=this._keymap.get(e);if(t)return this._keymap.delete(t.key),t[_]&&t[x]?(t[x][_]=t[_],t[_][x]=t[x]):t[_]?(t[_][x]=void 0,this.oldest=t[_]):t[x]?(t[x][_]=void 0,this.newest=t[x]):this.oldest=this.newest=void 0,this.size--,t.value},e.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()},e.prototype.keys=function(){return new N(this.oldest)},e.prototype.values=function(){return new T(this.oldest)},e.prototype.entries=function(){},e.prototype.forEach=function(e,t){"object"!==typeof t&&(t=this);var n=this.oldest;while(n)e.call(t,n.value,n.key,this),n=n[_]},e.prototype.toJSON=function(){var e=new Array(this.size),t=0,n=this.oldest;while(n)e[t++]={key:n.key,value:n.value},n=n[_];return e},e.prototype.toString=function(){var e="",t=this.oldest;while(t)e+=String(t.key)+":"+t.value,t=t[_],t&&(e+=" < ");return e},e.prototype[Symbol.iterator]=function(){return new A(this.oldest)}})();var A=function(){function e(e){this.entry=e}return e.prototype[Symbol.iterator]=function(){return this},e.prototype.next=function(){var e=this.entry;return e?(this.entry=e[_],{done:!1,value:[e.key,e.value]}):{done:!0,value:void 0}},e}(),N=function(){function e(e){this.entry=e}return e.prototype[Symbol.iterator]=function(){return this},e.prototype.next=function(){var e=this.entry;return e?(this.entry=e[_],{done:!1,value:e.key}):{done:!0,value:void 0}},e}(),T=function(){function e(e){this.entry=e}return e.prototype[Symbol.iterator]=function(){return this},e.prototype.next=function(){var e=this.entry;return e?(this.entry=e[_],{done:!1,value:e.value}):{done:!0,value:void 0}},e}();var D;(function(e){e["Backspace"]="Backspace",e["Tab"]="Tab",e["Enter"]="Enter",e["Shift"]="Shift",e["Control"]="Control",e["Alt"]="Alt",e["CapsLock"]="CapsLock",e["Escape"]="Escape",e["Space"]=" ",e["PageUp"]="PageUp",e["PageDown"]="PageDown",e["End"]="End",e["Home"]="Home",e["ArrowLeft"]="ArrowLeft",e["ArrowUp"]="ArrowUp",e["ArrowRight"]="ArrowRight",e["ArrowDown"]="ArrowDown",e["Left"]="Left",e["Up"]="Up",e["Right"]="Right",e["Down"]="Down",e["Insert"]="Insert",e["Delete"]="Delete",e["Zero"]="0",e["ClosedParen"]=")",e["One"]="1",e["ExclamationMark"]="!",e["Two"]="2",e["AtSign"]="@",e["Three"]="3",e["PoundSign"]="£",e["Hash"]="#",e["Four"]="4",e["DollarSign"]="$",e["Five"]="5",e["PercentSign"]="%",e["Six"]="6",e["Caret"]="^",e["Hat"]="^",e["Seven"]="7",e["Ampersand"]="&",e["Eight"]="8",e["Star"]="*",e["Asterisk"]="*",e["Nine"]="9",e["OpenParen"]="(",e["a"]="a",e["b"]="b",e["c"]="c",e["d"]="d",e["e"]="e",e["f"]="f",e["g"]="g",e["h"]="h",e["i"]="i",e["j"]="j",e["k"]="k",e["l"]="l",e["m"]="m",e["n"]="n",e["o"]="o",e["p"]="p",e["q"]="q",e["r"]="r",e["s"]="s",e["t"]="t",e["u"]="u",e["v"]="v",e["w"]="w",e["x"]="x",e["y"]="y",e["z"]="z",e["A"]="A",e["B"]="B",e["C"]="C",e["D"]="D",e["E"]="E",e["F"]="F",e["G"]="G",e["H"]="H",e["I"]="I",e["J"]="J",e["K"]="K",e["L"]="L",e["M"]="M",e["N"]="N",e["O"]="O",e["P"]="P",e["Q"]="Q",e["R"]="R",e["S"]="S",e["T"]="T",e["U"]="U",e["V"]="V",e["W"]="W",e["X"]="X",e["Y"]="Y",e["Z"]="Z",e["Meta"]="Meta",e["LeftWindowKey"]="Meta",e["RightWindowKey"]="Meta",e["Numpad0"]="0",e["Numpad1"]="1",e["Numpad2"]="2",e["Numpad3"]="3",e["Numpad4"]="4",e["Numpad5"]="5",e["Numpad6"]="6",e["Numpad7"]="7",e["Numpad8"]="8",e["Numpad9"]="9",e["Multiply"]="*",e["Add"]="+",e["Subtract"]="-",e["DecimalPoint"]=".",e["MSDecimalPoint"]="Decimal",e["Divide"]="/",e["F1"]="F1",e["F2"]="F2",e["F3"]="F3",e["F4"]="F4",e["F5"]="F5",e["F6"]="F6",e["F7"]="F7",e["F8"]="F8",e["F9"]="F9",e["F10"]="F10",e["F11"]="F11",e["F12"]="F12",e["NumLock"]="NumLock",e["ScrollLock"]="ScrollLock",e["SemiColon"]=";",e["Equals"]="=",e["Comma"]=",",e["Dash"]="-",e["Period"]=".",e["UnderScore"]="_",e["PlusSign"]="+",e["ForwardSlash"]="/",e["Tilde"]="~",e["GraveAccent"]="`",e["OpenBracket"]="[",e["ClosedBracket"]="]",e["Quote"]="'"})(D||(D={}));n(8939),new Set(["A","ABBR","ACRONYM","AUDIO","B","BDI","BDO","BIG","BR","BUTTON","CANVAS","CITE","CODE","DATA","DATALIST","DEL","DFN","EM","EMBED","I","IFRAME","IMG","INS","KBD","LABEL","MAP","MARK","METER","NOSCRIPT","OBJECT","OUTPUT","PICTURE","PROGRESS","Q","RUBY","S","SAMP","SELECT","SLOT","SMALL","STRONG","SUB","SUP","SVG","TEMPLATE","TEXTAREA","TIME","U","TT","VAR","VIDEO","WBR","INPUT","SPAN"])},1873:function(e,t,n){var r=n(9325),o=r.Symbol;e.exports=o},2552:function(e,t,n){var r=n(1873),o=n(659),i=n(9350),a="[object Null]",s="[object Undefined]",l=r?r.toStringTag:void 0;function u(e){return null==e?void 0===e?s:a:l&&l in Object(e)?o(e):i(e)}e.exports=u},4128:function(e,t,n){var r=n(1800),o=/^\s+/;function i(e){return e?e.slice(0,r(e)+1).replace(o,""):e}e.exports=i},4840:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},659:function(e,t,n){var r=n(1873),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,s=r?r.toStringTag:void 0;function l(e){var t=i.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(l){}var o=a.call(e);return r&&(t?e[s]=n:delete e[s]),o}e.exports=l},9350:function(e){var t=Object.prototype,n=t.toString;function r(e){return n.call(e)}e.exports=r},9325:function(e,t,n){var r=n(4840),o="object"==typeof self&&self&&self.Object===Object&&self,i=r||o||Function("return this")();e.exports=i},1800:function(e){var t=/\s/;function n(e){var n=e.length;while(n--&&t.test(e.charAt(n)));return n}e.exports=n},8221:function(e,t,n){var r=n(3805),o=n(124),i=n(9374),a="Expected a function",s=Math.max,l=Math.min;function u(e,t,n){var u,c,p,d,f,h,v=0,m=!1,y=!1,b=!0;if("function"!=typeof e)throw new TypeError(a);function g(t){var n=u,r=c;return u=c=void 0,v=t,d=e.apply(r,n),d}function w(e){return v=e,f=setTimeout(_,t),m?g(e):d}function S(e){var n=e-h,r=e-v,o=t-n;return y?l(o,p-r):o}function E(e){var n=e-h,r=e-v;return void 0===h||n>=t||n<0||y&&r>=p}function _(){var e=o();if(E(e))return x(e);f=setTimeout(_,S(e))}function x(e){return f=void 0,b&&u?g(e):(u=c=void 0,d)}function k(){void 0!==f&&clearTimeout(f),v=0,u=h=c=f=void 0}function A(){return void 0===f?d:x(o())}function N(){var e=o(),n=E(e);if(u=arguments,c=this,h=e,n){if(void 0===f)return w(h);if(y)return clearTimeout(f),f=setTimeout(_,t),g(h)}return void 0===f&&(f=setTimeout(_,t)),d}return t=i(t)||0,r(n)&&(m=!!n.leading,y="maxWait"in n,p=y?s(i(n.maxWait)||0,t):p,b="trailing"in n?!!n.trailing:b),N.cancel=k,N.flush=A,N}e.exports=u},3805:function(e){function t(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=t},346:function(e){function t(e){return null!=e&&"object"==typeof e}e.exports=t},4394:function(e,t,n){var r=n(2552),o=n(346),i="[object Symbol]";function a(e){return"symbol"==typeof e||o(e)&&r(e)==i}e.exports=a},124:function(e,t,n){var r=n(9325),o=function(){return r.Date.now()};e.exports=o},7350:function(e,t,n){var r=n(8221),o=n(3805),i="Expected a function";function a(e,t,n){var a=!0,s=!0;if("function"!=typeof e)throw new TypeError(i);return o(n)&&(a="leading"in n?!!n.leading:a,s="trailing"in n?!!n.trailing:s),r(e,t,{leading:a,maxWait:t,trailing:s})}e.exports=a},9374:function(e,t,n){var r=n(4128),o=n(3805),i=n(4394),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,l=/^0b[01]+$/i,u=/^0o[0-7]+$/i,c=parseInt;function p(e){if("number"==typeof e)return e;if(i(e))return a;if(o(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=o(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=l.test(e);return n||u.test(e)?c(e.slice(2),n?2:8):s.test(e)?a:+e}e.exports=p},8939:function(e,t,n){var r,o,i;(function(n){o=[],r=n,i="function"===typeof r?r.apply(t,o):r,void 0===i||(e.exports=i)})((function(){"use strict";var e,t,r,o,i="undefined"!=typeof window?window:void 0!=typeof n.g?n.g:this||{},a=i.cancelRequestAnimationFrame&&i.requestAnimationFrame||setTimeout,s=i.cancelRequestAnimationFrame||clearTimeout,l=[],u=0,c=!1,p=7,d=35,f=125,h=0,v=0,m=0,y={get didTimeout(){return!1},timeRemaining:function(){var e=p-(Date.now()-v);return e<0?0:e}},b=g((function(){p=22,f=66,d=0}));function g(e){var t,n,r=99,o=function(){var i=Date.now()-n;i<r?t=setTimeout(o,r-i):(t=null,e())};return function(){n=Date.now(),t||(t=setTimeout(o,r))}}function w(){c&&(o&&s(o),r&&clearTimeout(r),c=!1)}function S(){125!=f&&(p=7,f=125,d=35,c&&(w(),x())),b()}function E(){o=null,r=setTimeout(k,0)}function _(){r=null,a(E)}function x(){c||(t=f-(Date.now()-v),e=Date.now(),c=!0,d&&t<d&&(t=d),t>9?r=setTimeout(_,t):(t=0,_()))}function k(){var n,o,i,a=p>9?9:1;if(v=Date.now(),c=!1,r=null,u>2||v-t-50<e)for(o=0,i=l.length;o<i&&y.timeRemaining()>a;o++)n=l.shift(),m++,n&&n(y);l.length?x():u=0}function A(e){return h++,l.push(e),x(),h}function N(e){var t=e-1-m;l[t]&&(l[t]=null)}if(i.requestIdleCallback&&i.cancelIdleCallback)try{i.requestIdleCallback((function(){}),{timeout:0})}catch(T){(function(e){var t,n;if(i.requestIdleCallback=function(t,n){return n&&"number"==typeof n.timeout?e(t,n.timeout):e(t)},i.IdleCallbackDeadline&&(t=IdleCallbackDeadline.prototype)){if(n=Object.getOwnPropertyDescriptor(t,"timeRemaining"),!n||!n.configurable||!n.get)return;Object.defineProperty(t,"timeRemaining",{value:function(){return n.get.call(this)},enumerable:!0,configurable:!0})}})(i.requestIdleCallback)}else i.requestIdleCallback=A,i.cancelIdleCallback=N,i.document&&document.addEventListener&&(i.addEventListener("scroll",S,!0),i.addEventListener("resize",S),document.addEventListener("focus",S,!0),document.addEventListener("mouseover",S,!0),["click","keypress","touchstart","mousedown"].forEach((function(e){document.addEventListener(e,S,{capture:!0,passive:!0})})),i.MutationObserver&&new MutationObserver(S).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}));return{request:A,cancel:N}}))},5217:function(e,t,n){"use strict";n.d(t,{A:function(){return f}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-drawer",{staticClass:"setter-panel",attrs:{title:e.selectionName,visible:e.drawerVisible,modal:!1,size:"260","before-close":e.handleClose},on:{"update:visible":function(t){e.drawerVisible=t}}},[e.activeNode?n("div",{key:e.selectionName},e._l(e.activeNode.componentMeta.configure,(function(t,r){return n("div",{key:r,attrs:{label:t.title}},[n("div",{staticClass:"setter-panel-title"},[e._v(e._s(t.title))]),n("q-form",{ref:"formRef",refInFor:!0,attrs:{model:e.form,rules:e.formRules}},e._l(t.override,(function(t,r){return n("div",{key:r},[e.isShow(t.name)?[n("q-form-item",{attrs:{label:e.getLabel(t),"label-width":e.getLabelWidth(t),"label-position":e.getLabelPosition(t),prop:t.name}},[n(e.getSetter(t.setter),e._b({tag:"component",attrs:{value:e.getValue(t.name),"on-change":e.getChange(t)}},"component",e.getProps(t.setter),!1))],1)]:e._e()],2)})),0)],1)})),0):e._e()])},o=[],i=n(5738),a=n(2543),s=n(5206);const l={name:"SetterPanel",setup:(e,t)=>{const{proxy:n}=(0,i.nI)(),r=(0,s.ZY)(),o=r.value.selection,l=(0,s.Vu)();(0,i.wB)((()=>o.value),(()=>{console.log(o.value,"selection.value"),(0,i.dY)((()=>{l.value.settersFormInstance=n.$refs.formRef[0]}))}));const u=(0,i.EW)((()=>r.value.activeNode.value)),c=(0,i.EW)((()=>!!o.value)),p=(0,i.EW)((()=>{const e=o.value?.type;return("screen"===e?"大屏配置":"组件属性配置")+`(${e})`})),d=(0,i.KR)({}),f=(0,i.EW)((()=>o.value?.generateValidateRules())),h=e=>u.value.props[e],v=e=>{const t=e.name,n=u.value.componentMeta.props.find((e=>e.name===t));return n?.desc||""},m=e=>{const t=u.value.componentMeta.props.find((t=>t.name===e));return!1!==t?.visible},y=e=>{const t="80px",n=E(e.setter);return n.labelWidth||t},b=e=>{const t=E(e.setter);return t.position||"left"},g=e=>(0,a.get)(e,"setter.props.onBeforeChange",(e=>e)),w=e=>{const t=e.name,n=g(e);return e=>{o.value.props[t]=n(e,o)}},S=e=>"string"===typeof e?e:(0,a.get)(e,"componentName"),E=e=>{if("string"===typeof e)return{};const t=(0,a.get)(e,"props",{});for(const n in t)t[n]instanceof Promise&&t[n].then((e=>{t[n]=e}));return t},_=()=>{o.value=null};return{activeNode:u,drawerVisible:c,selectionName:p,form:d,formRules:f,getValue:h,getLabel:v,isShow:m,getLabelWidth:y,getLabelPosition:b,getChange:w,getSetter:S,getProps:E,handleClose:_}}};var u=l,c=u,p=n(1656),d=(0,p.A)(c,r,o,!1,null,"57a55bc5",null),f=d.exports},5206:function(e,t,n){"use strict";n.d(t,{ZY:function(){return s},hb:function(){return l},Vu:function(){return a}});var r=n(5738),o=n(8642);function i(){return(0,r.WQ)(o.k)}function a(){var e=i();return(0,r.EW)((function(){return null===e||void 0===e?void 0:e.value.workbench}))}function s(){var e=i();return(0,r.EW)((function(){return null===e||void 0===e?void 0:e.value.document}))}function l(){var e=i();return(0,r.EW)((function(){return null===e||void 0===e?void 0:e.value.dragon}))}},8495:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var r=n(550),o=n(2543),i=function(){function e(e){this.id=e.id||"node_".concat((0,r.Ld)()),this.props=e.props||this.meta2Props(e.componentMeta),this.componentName=e.componentName,this.componentMeta=e.componentMeta,this.type=e.type,this.w=e.w,this.h=e.h,this.x=e.x,this.y=e.y}return Object.defineProperty(e.prototype,"propsMeta",{get:function(){return(0,o.get)(this.componentMeta,"props",[])},enumerable:!1,configurable:!0}),e.prototype.meta2Props=function(e){var t={},n=(e||[]).props;return n.forEach((function(e){t[e.name]=(0,o.cloneDeep)(e.defaultValue)})),t},e.prototype.validator=function(){for(var e,t,n=0,r=this.propsMeta;n<r.length;n++){var i=r[n];if("string"===(0,o.get)(i,"rules.type")&&i.rules.required&&(0,o.isEmpty)(null===(e=this.props)||void 0===e?void 0:e[i.name]))return void new Error("".concat(i.desc,"不能为空"));if("array"===(0,o.get)(i,"rules.type")&&i.rules.required){var a=null===(t=this.props)||void 0===t?void 0:t[i.name];if((0,o.isEmpty)(a))return void new Error("".concat(i.desc,"不能为空"))}}return!0},e.prototype.generateValidateRules=function(){for(var e={},t=function(t){if("string"===(0,o.get)(t,"rules.type")&&t.rules.required&&(e[t.name]=[{required:!0,message:"".concat(t.desc,"不能为空"),trigger:"blur"}]),"array"===(0,o.get)(t,"rules.type")&&t.rules.required){var n=function(e,n,r){(0,o.isEmpty)(n)?r(new Error("".concat(t.desc,"不能为空"))):r()};e[t.name]=[{required:!0,validator:n,message:"".concat(t.desc,"不能为空"),trigger:"blur"}]}},n=0,r=this.propsMeta;n<r.length;n++){var i=r[n];t(i)}return e},e.prototype.getSchema=function(){return{id:this.id,type:this.type,componentName:this.componentName,props:this.props||{},w:this.w,h:this.h,x:this.x,y:this.y}},e}()},7626:function(e,t,n){"use strict";n.d(t,{A:function(){return et}});var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" "+e._s(e.value)+" ")])},o=[],i=n(5738),a=(0,i.pM)({name:"StringSetter",props:{value:{type:String,default:""}}}),s=a,l=n(1656),u=(0,l.A)(s,r,o,!1,null,null,null),c=u.exports,p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-input",{attrs:{value:e.value,type:e.type,maxlength:e.maxlength,autosize:{minRows:4,maxRows:6},"show-word-limit":"",placeholder:"请输入"},on:{input:e.onChange}})},d=[];const f={};f.props={value:{type:String,default:""},type:{type:String,default:"text"},maxlength:{type:Number,default:32},onChange:{type:Function,default:()=>{}}};var h=f,v=h,m=(0,l.A)(v,p,d,!1,null,null,null),y=m.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"number-setter"},[n("q-input-number",{attrs:{max:e.max,min:e.min,"controls-position":"right"},on:{change:e.onChange},model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}}),n("span",[e._v(e._s(e.text))])],1)},g=[],w=(0,i.pM)({name:"NumberSetter",props:{value:{type:Number,default:0},text:{type:String,default:""},max:{type:Number,default:60},min:{type:Number,default:1},onChange:{type:Function,default:()=>{}}},setup(e){return{_value:(0,i.EW)({get:()=>e.value,set:t=>e.onChange(t)})}}}),S=w,E=(0,l.A)(S,b,g,!1,null,"58bb5552",null),_=E.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-switch",{attrs:{value:e.value},on:{change:e.onChange}})},k=[],A=(0,i.pM)({name:"BooleanSetter",props:{value:{type:Boolean,default:!1},onChange:{type:Function,default:()=>{}}}}),N=A,T=(0,l.A)(N,x,k,!1,null,null,null),D=T.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-select",{staticStyle:{width:"100%"},model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}},e._l(e.options,(function(e){return n("q-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1)},O=[],q=(0,i.pM)({name:"SelectSetter",props:{value:{type:String,default:""},onChange:{type:Function,default:()=>{}},options:{type:Array,default:()=>[]}},setup(e){return{_value:(0,i.EW)({get:()=>e.value,set:t=>e.onChange(t)})}}}),R=q,M=(0,l.A)(R,C,O,!1,null,null,null),L=M.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("q-button",{attrs:{type:"text"},on:{click:function(t){e.drawer=!0}}},[e._v(" 编辑静态数据 ")]),n("q-drawer",{attrs:{title:"编辑静态数据",size:"800px",wrapperClosable:!1,visible:e.drawer},on:{"update:visible":function(t){e.drawer=t}}},[n("q-tabs",{attrs:{type:"card","before-leave":e.onBeforeTabLeave},model:{value:e.activeMode,callback:function(t){e.activeMode=t},expression:"activeMode"}},[n("q-tab-pane",{attrs:{label:"可视模式",name:"table"}},[e.activeTableTab?n("DynamicTable",{ref:"dynamicTableRef",attrs:{"table-head-data":e.tableHeadData,"data-ids":e.tableDataIds,"is-custom-row":e.isCustomRow,disabled:!1}}):e._e()],1),n("q-tab-pane",{attrs:{label:"Json模式",name:"json"}},[n("JsonEditor",{ref:"jsonEditorRef",attrs:{"data-ids":e.tableDataIds}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("q-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("确定")])],1)],1)],1)},P=[],F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"dynamic-table"},[n("div",{staticClass:"add-btn"},[n("q-button",{attrs:{disabled:e.addDisabled,type:"primary",icon:"qax-icon-Alone-Plus"},on:{click:e.handleAdd}},[e._v(" 增加一行 ")])],1),n("q-form",{ref:"formRef",staticClass:"dynamic-form",attrs:{model:e.form,disabled:e.disabled}},[n("VirtualScrollTable",{attrs:{buffer:30,data:e.formData.tableData,height:73,"key-prop":"_index"},on:{change:function(t){return e.form.virtualList=t}}},[n("q-table",{ref:"tableRef",staticClass:"edit-table w-full mt-8",attrs:{data:e.form.virtualList,height:"360"}},[e._l(e.tableHeadData,(function(t){return n("q-table-column",e._b({key:t.prop,scopedSlots:e._u([{key:"default",fn:function(r){var o=r.row,i=r.$index;return[n("q-form-item",{attrs:{prop:"virtualList."+i+"."+t.prop,rules:{required:t.required,message:t.label+"不能为空"}}},[n(t.component,e._b({tag:"component",model:{value:o[t.prop],callback:function(n){e.$set(o,t.prop,n)},expression:"row[item.prop]"}},"component",t.componentProps,!1))],1)]}}],null,!0)},"q-table-column",t,!1))})),n("q-table-column",{attrs:{label:"操作",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("q-button",{attrs:{disabled:!e.isCustomRow,icon:"qax-icon-Trash",type:"text",title:"删除",size:"medium",danger:""},on:{click:function(n){return e.handleDelete(t.row._index)}}})]}}])})],2)],1)],1)],1)},j=[],B=(n(4114),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n(e.name,e._g(e._b({tag:"component"},"component",e.$attrs,!1),e.$listeners))}),$=[],V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-select",e._g(e._b({scopedSlots:e._u([{key:"prefix",fn:function(){return[e._t("prefix")]},proxy:!0},{key:"empty",fn:function(){return[e._t("empty")]},proxy:!0}],null,!0)},"q-select",e.$attrs,!1),e.$listeners),e._l(e.options,(function(t){return n("q-option",{key:t[e.config.value],attrs:{label:t[e.config.label],value:t[e.config.value],disabled:t[e.config.disabled]}},[e._t("option",null,null,t)],2)})),1)},z=[];const W={name:"CustomSelect",inheritAttrs:!1};W.props={options:{type:Array,default:()=>[]},config:{type:Object,default:()=>({value:"value",label:"label",disabled:"disabled"})}};var U=W,K=U,Y=(0,l.A)(K,V,z,!1,null,null,null),H=Y.exports,J={name:"DynamicComponent",components:{CustomSelect:H},props:{name:{type:String,required:!0}}},G=J,Q=(0,l.A)(G,B,$,!1,null,null,null),Z=Q.exports,X=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._t("default")],2)},ee=[],te=n(7350),ne=n.n(te),re={name:"VirtualScrollTable",props:{data:{type:Array,required:!0},height:{type:Number,default:60},buffer:{type:Number,default:500},keyProp:{type:String,default:"id"},throttleTime:{type:Number,default:100}},data(){return{sizes:{}}},computed:{offsetMap({keyProp:e,height:t,sizes:n,data:r}){const o={};let i=0;for(let a=0;a<r.length;a++){const s=r[a][e];o[s]=i;const l=n[s],u="number"===typeof l?l:t;i+=u}return o}},watch:{data(){this.update()}},created(){this.$nextTick((()=>{this.initData()}))},beforeDestroy(){this.scroller&&(this.scroller.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onScroll))},methods:{initData(){this.renderData=[],this.top=void 0,this.bottom=void 0,this.start=0,this.end=void 0,this.scroller=this.$el.querySelector(".q-table__body-wrapper"),setTimeout((()=>{this.handleScroll()}),100),this.onScroll=ne()(this.handleScroll,this.throttleTime),this.scroller.addEventListener("scroll",this.handleScroll),window.addEventListener("resize",this.onScroll)},updateSizes(){const e=this.$el.querySelectorAll(".q-table__body > tbody > .q-table__row");Array.from(e).forEach(((e,t)=>{const n=this.renderData[t];if(!n)return;const r=n[this.keyProp],o=e.offsetHeight;this.sizes[r]!==o&&this.$set(this.sizes,r,o)}))},handleScroll(e=!0){this.updateSizes(),this.calcRenderData(),this.calcPosition(),e&&this.updatePosition(),this.$emit("change",this.renderData,this.start,this.end)},getOffsetTop(e){const t=this.data[e];return t&&this.offsetMap[t[this.keyProp]]||0},getSize(e){const t=this.data[e];if(t){const e=t[this.keyProp];return this.sizes[e]||this.height}return this.height},calcRenderData(){const{scroller:e,data:t,buffer:n}=this,r=e.scrollTop-n,o=e.scrollTop+e.offsetHeight+n;let i=0,a=t.length-1,s=0;while(i<=a){s=Math.floor((i+a)/2);const e=this.getOffsetTop(s);if(e<r){const e=this.getOffsetTop(s+1);if(e>r)break;i=s+1}else a=s-1}let l=s,u=t.length-1;for(let c=l+1;c<t.length;c++){const e=this.getOffsetTop(c);if(e>=o){u=c;break}}l%2&&(l-=1),this.top=r,this.bottom=o,this.start=l,this.end=u,this.renderData=t.slice(l,u+1),console.log("renderData",this.renderData)},calcPosition(){const e=this.data.length-1,t=this.getOffsetTop(e)+this.getSize(e),n=this.getOffsetTop(this.start),r=[".q-table__body-wrapper",".q-table__fixed-right .q-table__fixed-body-wrapper",".q-table__fixed .q-table__fixed-body-wrapper"];r.forEach((e=>{const r=this.$el.querySelector(e);if(r){if(!r.wrapEl){const e=document.createElement("div"),t=document.createElement("div");e.appendChild(t),t.appendChild(r.children[0]),r.insertBefore(e,r.firstChild),r.wrapEl=e,r.innerEl=t}r.wrapEl&&(r.wrapEl.style.height=t+"px",r.innerEl.style.transform=`translateY(${n}px)`)}}))},updatePosition(){this.timer&&clearTimeout(this.timer),this.timer=setTimeout((()=>{this.timer&&clearTimeout(this.timer),this.handleScroll(!1)}),this.throttleTime+10)},update(){console.log("update"),this.handleScroll()},scrollTo(e,t=!1){const n=this.data[e];n&&this.scroller&&(this.updateSizes(),this.calcRenderData(),this.$nextTick((()=>{const n=this.getOffsetTop(e);this.scroller.scrollTop=n,t||setTimeout((()=>{this.scrollTo(e,!0)}),50)})))},reset(){this.sizes={},this.scrollTo(0,!1)}}},oe=re,ie=(0,l.A)(oe,X,ee,!1,null,null,null),ae=ie.exports,se=n(2543),le={name:"DynamicTable",components:{DynamicComponent:Z,CustomSelect:H,VirtualScrollTable:ae},props:{dataIds:{type:Array,default:()=>[]},tableHeadData:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!0},isCustomRow:{type:Boolean,default:!0}},data(){return{formData:{tableData:[]},form:{virtualList:[]}}},computed:{newRow(){const e={};return this.tableHeadData.forEach((t=>{e[t.prop]=t.componentProps?.multiple?[]:""})),e},addDisabled(){return!this.isCustomRow||this.disabled}},methods:{handleAdd(){this.formData.tableData.push({...this.newRow,_index:this.formData.tableData.length})},handleDelete(e){const t=this.formData.tableData.findIndex((t=>t._index===e));this.formData.tableData.splice(t,1)},getValues(){const e=(0,se.cloneDeep)(this.formData.tableData);return e.forEach(((e,t)=>{this.dataIds.forEach((n=>{e[n]=t+1}))})),e},setValues(e){this.formData.tableData=e},async validate(){return await this.$refs.formRef.validate()}}},ue=le,ce=(0,l.A)(ue,F,j,!1,null,"7ac3c15e",null),pe=ce.exports,de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-input",{attrs:{type:"textarea",rows:12,placeholder:"仅支持JSON格式",disabled:e.disabled},model:{value:e.json,callback:function(t){e.json=t},expression:"json"}})},fe=[];const he={};he.props={dataIds:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1}},he.setup=(e,t)=>{const n=e,r=(0,i.KR)(""),o=()=>{let e;try{e=JSON.parse(r.value)}catch(t){return console.log(t),!1}return"object"===typeof e},a=()=>{const e=JSON.parse(r.value);return Array.isArray(e)&&e.forEach(((e,t)=>{n.dataIds.forEach((n=>{e[n]=t+1}))})),e},s=e=>{r.value=JSON.stringify(e,null,2)};return Object.assign({json:r},{setValues:s,getValues:a,validate:o})};var ve=he,me=ve,ye=(0,l.A)(me,de,fe,!1,null,null,null),be=ye.exports;const ge={name:"EventSetter"};ge.props={value:{type:String,default:""},onChange:{type:Function,default:()=>{}}},ge.setup=(e,t)=>{const n=e,{proxy:r}=((0,i.KR)(n.value),(0,i.nI)()),o=(0,i.KR)(!1),a=(0,i.KR)("table"),s=(0,i.KR)([{label:"事件名称",prop:"name",type:"text",required:!0,component:"CustomSelect",componentProps:{options:[{label:"事件1",value:"事件1"},{label:"事件2",value:"事件2"}]}}]),l=(0,i.KR)([]),u=(0,i.KR)(!0),c=(0,i.KR)(!0),p=(0,i.KR)(null),d=(0,i.KR)(null),f=async(e,t)=>{if("table"===e&&"json"===t){const e=d.value.validate();if(!e)return r.$message.error("JSON格式不正确，无法转换为可视数据!"),!1;const t=d.value.getValues();c.value=!1,await(0,i.dY)(),c.value=!0,await(0,i.dY)(),p.value.setValues(t)}else if("json"===e&&"table"===t){const e=p.value.getValues();d.value.setValues(e)}return!0},h=()=>{const e=p.value.getValues(),t=JSON.stringify(e,null,2);n.onChange(t),o.value=!1};return{drawer:o,activeMode:a,tableHeadData:s,tableDataIds:l,isCustomRow:u,activeTableTab:c,dynamicTableRef:p,jsonEditorRef:d,onBeforeTabLeave:f,handleSave:h}},ge.components=Object.assign({DynamicTable:pe,JsonEditor:be},ge.components);var we=ge,Se=we,Ee=(0,l.A)(Se,I,P,!1,null,"4cfdb3e2",null),_e=Ee.exports,xe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"field-setter"},[e._l(e._value,(function(t,r){return n("div",{key:t.field,staticClass:"field-list"},[n("q-select",{attrs:{placeholder:"选择字段"},model:{value:t.fieldId,callback:function(n){e.$set(t,"fieldId",n)},expression:"item.fieldId"}},e._l(e.fields,(function(e){return n("q-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1),n("div",{staticClass:"rule"}),n("q-select",{attrs:{placeholder:"选择规则"},model:{value:t.ruleId,callback:function(n){e.$set(t,"ruleId",n)},expression:"item.ruleId"}},e._l(e.rules,(function(e){return n("q-option",{key:e.id,attrs:{label:e.label,value:e.id}})})),1),n("q-button",{staticClass:"delete",attrs:{type:"text",title:"删除",danger:""},on:{click:function(t){return e.handleDeleteRow(r)}}},[n("i",{staticClass:"q-icon-delete"})])],1)})),n("q-button",{staticClass:"add-style",attrs:{type:"text"},on:{click:e.handleAddRow}},[e._v(" 添加 ")])],2)},ke=[],Ae=(0,i.pM)({name:"DesensitizationFieldSetter",props:{value:{type:Array,default:()=>[]},onChange:{type:Function,default:()=>{}}},setup(e){const t=[{id:"1",label:"字段1"},{id:"2",label:"字段2"}],n=[{id:"1",label:"规则1"},{id:"2",label:"规则2"}],r=e.value,o=()=>{r.push({fieldId:"",ruleId:""}),e.onChange(r)},i=t=>{r.splice(t,1),e.onChange(r)};return{fields:t,rules:n,_value:r,handleAddRow:o,handleDeleteRow:i}}}),Ne=Ae,Te=(0,l.A)(Ne,xe,ke,!1,null,"48e55506",null),De=Te.exports,Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"output-event-setter"},[n("q-checkbox-group",{model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}},e._l(e.options,(function(t,r){return n("q-checkbox",{key:r,attrs:{label:t.value}},[e._v(e._s(t.label)+" ")])})),1)],1)},Oe=[],qe=(0,i.pM)({name:"CheckboxSetter",props:{value:{type:Array,default:()=>[]},options:{type:Array,default:()=>[]},onChange:{type:Function,default:()=>{}}},setup(e){return{_value:(0,i.EW)({get:()=>e.value,set:t=>e.onChange(t)})}}}),Re=qe,Me=(0,l.A)(Re,Ce,Oe,!1,null,null,null),Le=Me.exports,Ie=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("img",{staticClass:"upload-img",attrs:{src:n(8145)("./view"+e.value+".png"),alt:""}})])},Pe=[],Fe=(0,i.pM)({name:"UploadSetter",props:{value:{type:String,default:""},onChange:{type:Function,default:()=>{}}},setup(){const e=e=>{};return{handleVariable:e}}}),je=Fe,Be=(0,l.A)(je,Ie,Pe,!1,null,"ba67adda",null),$e=Be.exports,Ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-cascader",{attrs:{props:e.propsOption,options:e.options,filterable:"",clearable:""},model:{value:e._value,callback:function(t){e._value=t},expression:"_value"}})},ze=[],We=(0,i.pM)({name:"RegionSetter",props:{value:{type:Number,default:null},onChange:{type:Function,default:()=>{}},options:{type:Array,default:()=>[]}},setup(e){const t={label:"name",value:"id",checkStrictly:!0};return{_value:(0,i.EW)({get:()=>e.value,set:t=>e.onChange(t)}),propsOption:t}}}),Ue=We,Ke=(0,l.A)(Ue,Ve,ze,!1,null,null,null),Ye=Ke.exports,He=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"list-setter"},e._l(e.options,(function(t,r){return n("span",{key:r},[e._v(" "+e._s(t))])})),0)},Je=[],Ge=(0,i.pM)({name:"ListSetter",props:{options:{type:Array,default:()=>[]}}}),Qe=Ge,Ze=(0,l.A)(Qe,He,Je,!1,null,"99ebb65a",null),Xe=Ze.exports,et={StringSetter:c,InputSetter:y,NumberSetter:_,BooleanSetter:D,SelectSetter:L,EditMockSetter:_e,DesensitizationFieldSetter:De,CheckboxSetter:Le,UploadSetter:$e,RegionSetter:Ye,ListSetter:Xe}},8642:function(e,t,n){"use strict";n.d(t,{k:function(){return b},A:function(){return g}});var r=n(5471),o=n(5738),i=n(550),a=n(2543),s=function(){function e(e){this.id=e.id||"screen_".concat((0,i.Ld)()),this.props=e.props||this.meta2Props(e.componentMeta),this.componentName=e.componentName,this.componentMeta=e.componentMeta,this.type=e.type}return Object.defineProperty(e.prototype,"propsMeta",{get:function(){return(0,a.get)(this.componentMeta,"props",[])},enumerable:!1,configurable:!0}),e.prototype.meta2Props=function(e){var t={},n=e.props;return n.forEach((function(e){t[e.name]=(0,a.cloneDeep)(e.defaultValue)})),t},e.prototype.validator=function(){for(var e,t,n=0,r=this.propsMeta;n<r.length;n++){var o=r[n];if("string"===(0,a.get)(o,"rules.type")&&o.rules.required&&(0,a.isEmpty)(null===(e=this.props)||void 0===e?void 0:e[o.name]))return void new Error("".concat(o.desc,"不能为空"));if("array"===(0,a.get)(o,"rules.type")&&o.rules.required){var i=null===(t=this.props)||void 0===t?void 0:t[o.name];if((0,a.isEmpty)(i))return void new Error("".concat(o.desc,"不能为空"))}}return!0},e.prototype.generateValidateRules=function(){for(var e={},t=function(t){if("string"===(0,a.get)(t,"rules.type")&&t.rules.required&&(e[t.name]=[{required:!0,message:"".concat(t.desc,"不能为空"),trigger:"blur"}]),"array"===(0,a.get)(t,"rules.type")&&t.rules.required){var n=function(e,n,r){(0,a.isEmpty)(n)?r(new Error("".concat(t.desc,"不能为空"))):r()};e[t.name]=[{required:!0,validator:n,message:"".concat(t.desc,"不能为空"),trigger:"blur"}]}},n=0,r=this.propsMeta;n<r.length;n++){var o=r[n];t(o)}return e},e.prototype.getSchema=function(){return{id:this.id,type:this.type,componentName:this.componentName,props:this.props||{}}},e}(),l=function(){function e(e){this.id=e.id||"map_".concat((0,i.Ld)()),this.props=e.props||this.meta2Props(e.componentMeta),this.componentName=e.componentName,this.componentMeta=e.componentMeta,this.type=e.type}return Object.defineProperty(e.prototype,"propsMeta",{get:function(){return(0,a.get)(this.componentMeta,"props",[])},enumerable:!1,configurable:!0}),e.prototype.meta2Props=function(e){var t={},n=e.props;return n.forEach((function(e){t[e.name]=(0,a.cloneDeep)(e.defaultValue)})),t},e.prototype.validator=function(){for(var e,t,n=0,r=this.propsMeta;n<r.length;n++){var o=r[n];if("string"===(0,a.get)(o,"rules.type")&&o.rules.required&&(0,a.isEmpty)(null===(e=this.props)||void 0===e?void 0:e[o.name]))return void new Error("".concat(o.desc,"不能为空"));if("array"===(0,a.get)(o,"rules.type")&&o.rules.required){var i=null===(t=this.props)||void 0===t?void 0:t[o.name];if((0,a.isEmpty)(i))return void new Error("".concat(o.desc,"不能为空"))}}return!0},e.prototype.generateValidateRules=function(){for(var e={},t=function(t){if("string"===(0,a.get)(t,"rules.type")&&t.rules.required&&(e[t.name]=[{required:!0,message:"".concat(t.desc,"不能为空"),trigger:"blur"}]),"array"===(0,a.get)(t,"rules.type")&&t.rules.required){var n=function(e,n,r){(0,a.isEmpty)(n)?r(new Error("".concat(t.desc,"不能为空"))):r()};e[t.name]=[{required:!0,validator:n,message:"".concat(t.desc,"不能为空"),trigger:"blur"}]}},n=0,r=this.propsMeta;n<r.length;n++){var o=r[n];t(o)}return e},e.prototype.getSchema=function(){return{id:this.id,type:this.type,componentName:this.componentName,props:this.props||{}}},e}(),u=n(8495),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)},p=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{l(r.next(e))}catch(t){i(t)}}function s(e){try{l(r["throw"](e))}catch(t){i(t)}}function l(e){e.done?n(e.value):o(e.value).then(a,s)}l((r=r.apply(e,t||[])).next())}))},d=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(s){if(n)throw new TypeError("Generator is already executing.");while(i&&(i=0,s[0]&&(a=0)),a)try{if(n=1,r&&(o=2&s[0]?r["return"]:s[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(l){s=[6,l],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},f=function(){function e(e){this.engine=e,this.screen=(0,o.KR)(null),this.map=(0,o.KR)(null),this.nodes=(0,o.KR)([]),this.operateNodes=(0,o.KR)([]),this.schema=(0,o.KR)(null),this.selection=(0,o.KR)(null)}return Object.defineProperty(e.prototype,"activeNode",{get:function(){return this.selection},enumerable:!1,configurable:!0}),e.prototype.init=function(){},e.prototype.addNode=function(e,t){t?this.operateNodes.value.push(e):this.nodes.value.push(e)},e.prototype.setMapProps=function(e,t){this.map.value&&this.map.value.props&&(this.map.value.props[e]=t)},e.prototype.setScreenProps=function(e,t){this.screen.value&&this.screen.value.props&&(this.screen.value.props[e]=t)},e.prototype.setSelection=function(e){this.selection.value=e},e.prototype.deleteNode=function(e,t){var n,r;t?this.operateNodes.value=null!==(n=this.operateNodes.value.filter((function(t){return t.id!==e})))&&void 0!==n?n:[]:this.nodes.value=null!==(r=this.nodes.value.filter((function(t){return t.id!==e})))&&void 0!==r?r:[],this.selection.value=null},e.prototype.deleteAllNode=function(){this.nodes.value=[]},e.prototype.deleteAllOperateNode=function(){this.operateNodes.value=[]},e.prototype.mergeNodeInfo=function(e,t,n){n?this.operateNodes.value=this.operateNodes.value.map((function(n){return n.id===e&&(n.x=t.x,n.y=t.y),n})):this.nodes.value=this.nodes.value.map((function(n){return n.id===e&&(n.x=t.x,n.y=t.y),n}))},e.prototype.setSchema=function(e){var t=e.screen,n=e.map,r=e.nodes,o=void 0===r?[]:r,i=e.operateNodes,a=void 0===i?[]:i;this.nodes.value=[];var p=this.engine.workbench.assets,d=Object.values(p.components);this.nodes.value=o.map((function(e){var t=d.find((function(t){return t.componentName===e.componentName})),n=new u.b(c(c({},t),e));return n})),this.operateNodes.value=a.map((function(e){var t=d.find((function(t){return t.componentName===e.componentName})),n=new u.b(c(c({},t),e));return n}));var f=d.find((function(e){return e.componentName===n.componentName}));this.map.value=new l(c(c({},f),n));var h=d.find((function(e){return e.componentName===t.componentName}));this.screen.value=new s(c(c({},h),t))},e.prototype.getSchema=function(){var e,t,n={screen:null===(e=this.screen.value)||void 0===e?void 0:e.getSchema(),map:null===(t=this.map.value)||void 0===t?void 0:t.getSchema(),nodes:this.nodes.value.map((function(e){return e.getSchema()})),operateNodes:this.operateNodes.value.map((function(e){return e.getSchema()}))};return n},e.prototype.onChangeSelection=function(e){return p(this,void 0,void 0,(function(){return d(this,(function(t){return this.selection.value=e,[2]}))}))},e.prototype.validateNodes=function(e){var t=null,n=function(e){return!!e.validator()||(t=e,!1)},r=e?e.validator():this.nodes.value.every(n);return{validateStatus:r,errorNode:t}},e}(),h=function(){function e(e){this.settersFormInstance=null,this.engine=e,this.assets={components:{},menu:[]},this.setters={}}return e.prototype.updateAssets=function(e){this.assets=(0,a.cloneDeep)(e)},e.prototype.updateSetters=function(e){this.setters=(0,a.cloneDeep)(e)},e.prototype.validateSettersForm=function(){return this.settersFormInstance?this.settersFormInstance.validate():Promise.resolve(!0)},e}(),v=function(){function e(e){this.engine=e}return e}(),m=function(){function e(e){this.engine=e}return e.prototype.cloneComponent=function(e){var t=new u.b(e);return t},e}(),y=function(){function e(e){var t=e.assets,n=e.setters;this.document=new f(this),this.workbench=new h(this),this.viewport=new v(this),this.dragon=new m(this),this.register(t,n),this.initDocument()}return e.prototype.initDocument=function(){this.document.init()},e.prototype.register=function(e,t){this.registerAssets(e),this.registerSetters(t)},e.prototype.registerAssets=function(e){if(e){var t=e.components;Object.keys(t).forEach((function(e){var n=t[e];r.A.component(n.componentName,n.component)})),this.workbench.updateAssets(e)}},e.prototype.registerSetters=function(e){Object.keys(e).forEach((function(t){r.A.component(t,e[t])})),this.workbench.updateSetters(e)},e}(),b=Symbol("Engine");function g(e){return new y(e)}},8145:function(e,t,n){var r={"./view1.png":847,"./view2.png":7636,"./view3.png":1533};function o(e){var t=i(e);return n(t)}function i(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}o.keys=function(){return Object.keys(r)},o.resolve=i,e.exports=o,o.id=8145}}]);
//# sourceMappingURL=154.12a9b062.js.map