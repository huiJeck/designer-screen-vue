"use strict";(self["webpackChunkvue2_composition_api"]=self["webpackChunkvue2_composition_api"]||[]).push([[601],{9838:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editor-frame--viewport"},[n("PreviewRender",{attrs:{screen:e.schemaObject.screen,map:e.schemaObject.map,nodes:e.schemaObject.nodes}})],1)},s=[],a=n(5738),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"preview-view"},[i("div",{staticClass:"screen-content",style:"width:"+e.screenWidth+"px;height:"+e.screenHeight+"px;\n      transform:translate("+e.getMinValue(e.defaultLeft)+"px, "+e.getMinValue(e.defaultTop)+"px) scale("+e.scaleSize/100+");transform-origin:0 0;"},[i("img",{attrs:{src:n(4306)("./map"+e.curMapId+".png"),alt:""}}),i("div",{staticClass:"screen-decoration"},[e._l(e.decorationImgList,(function(t,s){return i("img",{key:s,staticClass:"position-img",class:t.position,attrs:{src:n(2860)("./"+e.column+"/"+t.bg+".png")}})})),i("div",{staticClass:"position-title"},[e._v(e._s(e.screenTitle))]),i("div",{staticClass:"grid-stack",class:"grid-stack-style"+e.column},e._l(e.nodesArr,(function(t){return i("div",{key:t.id,staticClass:"grid-stack-item",attrs:{"gs-id":t.id,id:t.id,"gs-w":t.w,"gs-h":t.h,"gs-x":t.x,"gs-y":t.y}},[i("div",{staticClass:"grid-stack-item-content"},[i(t.componentName,e._b({tag:"component",attrs:{node:t}},"component",t.props,!1))],1)])})),0)],2),i("img",{staticClass:"full-screen-icon",attrs:{src:n(4491),alt:""},on:{click:e.handleFullScreen}})])])},l=[],r=n(8887),c=n(9006),u=n(5056),d=n(1994),p=n(2859),m=n(1778);const g={name:"PreviewRender",components:{View1:u.A,View2:d.A,Condition:p.A,MapDocument:m.A}};g.props={nodes:{type:Array,default:()=>[]},map:{type:Object,default:()=>({})},screen:{type:Object,default:()=>({})}},g.setup=(e,t)=>{const n=e,i=(0,a.EW)((()=>n.map.props.mapId)),s=(0,a.EW)((()=>n.map.props.column)),o=(0,a.EW)((()=>n.map.props.title)),l=[{bg:"top-bg",position:"position-top"},{bg:"right-bg",position:"position-left"},{bg:"right-bg",position:"position-right"},{bg:"bottom-bg",position:"position-bottom"}],u=(0,a.KR)(c.R[s.value].width),d=(0,a.KR)(c.R[s.value].height),p=(0,a.KR)(window.innerWidth),m=(0,a.KR)(window.innerHeight),g=(0,a.EW)((()=>p.value/u.value*100)),v=(0,a.EW)((()=>m.value/d.value*100)),h=(0,a.EW)((()=>g.value<v.value?g.value:v.value)),f=(0,a.EW)((()=>(m.value-p.value/u.value*d.value)/2)),b=(0,a.EW)((()=>(p.value-m.value/d.value*u.value)/2)),w=e=>e<0?0:e,R=()=>{document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen(),setTimeout((()=>{p.value=window.innerWidth,m.value=window.innerHeight}),100)},W=()=>{u.value=c.R[s.value].width,R()},k=(0,a.KR)(null),y=(0,a.KR)([]);return(0,a.sV)((async()=>{k.value=r.dn.init({acceptWidgets:!0,marginTop:0,marginBottom:16,marginLeft:16,marginRight:0,disableResize:!0,float:!0,row:10,cellHeight:"108px"}),y.value=n.nodes,await(0,a.dY)(),k.value.column(s.value),k.value.disable(!1),y.value.forEach((e=>{k.value.makeWidget(`#${e.id}`)})),r.dn.setupDragIn(".sidebar .grid-stack-item",{appendTo:"body",helper:"clone"})})),{curMapId:i,column:s,screenTitle:o,decorationImgList:l,screenWidth:u,screenHeight:d,scaleSize:h,defaultTop:f,defaultLeft:b,getMinValue:w,handleFullScreen:W,nodesArr:y}};var v=g,h=v,f=n(1656),b=(0,f.A)(h,o,l,!1,null,"05dd2c03",null),w=b.exports;const R={name:"Preview",setup:(e,t)=>{const{proxy:n}=(0,a.nI)(),i=localStorage.getItem("schema"),s=JSON.parse(i);return{schemaObject:s}}};R.components=Object.assign({PreviewRender:w},R.components);var W=R,k=W,y=(0,f.A)(k,i,s,!1,null,"9a437fb4",null),C=y.exports}}]);
//# sourceMappingURL=601.30143357.js.map